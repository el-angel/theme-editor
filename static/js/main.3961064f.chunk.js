(this["webpackJsonp@anche/tmtheme-client"]=this["webpackJsonp@anche/tmtheme-client"]||[]).push([[0],{11:function(e,t,n){e.exports={container:"src-containers-Settings-RuleSettings-styles-module__container--2r2dM",colorContainer:"src-containers-Settings-RuleSettings-styles-module__colorContainer--1FvYs",top:"src-containers-Settings-RuleSettings-styles-module__top--2A3DI",left:"src-containers-Settings-RuleSettings-styles-module__left--3S2TL",tools:"src-containers-Settings-RuleSettings-styles-module__tools--ZMjTI",picker:"src-containers-Settings-RuleSettings-styles-module__picker--VmP30",delete:"src-containers-Settings-RuleSettings-styles-module__delete--23Kh5",scopesList:"src-containers-Settings-RuleSettings-styles-module__scopesList--RxJbG",addScope:"src-containers-Settings-RuleSettings-styles-module__addScope--7ZgO8",addScopeInput:"src-containers-Settings-RuleSettings-styles-module__addScopeInput--3Hclo"}},114:function(e){e.exports=JSON.parse('{"name":"@anche/tmtheme-client","version":"0.1.0","repository":{"type":"git","url":"https://github.com/el-angel/tmtheme-editor.git"},"homepage":"https://el-angel.github.io/textmate-editor","dependencies":{"@anche/textmate-grammar-parser":"^0.0.0","@material-ui/core":"^4.11.0","@material-ui/icons":"^4.9.1","body-parser":"^1.19.0","camelcase":"^5.3.1","case-sensitive-paths-webpack-plugin":"2.3.0","chroma-js":"^2.1.0","classnames":"^2.2.6","lodash":"^4.17.15","react":"^16.13.1","react-app-polyfill":"^1.0.6","react-color":"^2.18.1","react-dev-utils":"^10.2.1","react-dom":"^16.13.1","recoil":"^0.0.10","resolve":"1.15.0","semver":"6.3.0"},"devDependencies":{"@babel/core":"7.9.0","@svgr/webpack":"4.3.3","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/chroma-js":"^2.0.0","@types/classnames":"^2.2.10","@types/jest":"^24.0.0","@types/lodash":"^4.14.155","@types/node":"^12.0.0","@types/oniguruma":"^7.0.1","@types/react":"^16.9.0","@types/react-color":"^3.0.2","@types/react-dom":"^16.9.0","@types/scheduler":"^0.16.1","babel-jest":"^24.9.0","babel-loader":"8.1.0","babel-plugin-named-asset-import":"^0.3.6","babel-preset-react-app":"^9.1.2","css-loader":"3.4.2","dotenv":"8.2.0","dotenv-expand":"5.1.0","eslint-loader":"3.0.3","express":"^4.17.1","file-loader":"4.3.0","fs-extra":"^8.1.0","gh-pages":"^3.0.0","html-webpack-plugin":"4.0.0-beta.11","identity-obj-proxy":"3.0.0","jest":"26","jest-environment-jsdom-fourteen":"1.0.1","jest-resolve":"24.9.0","jest-watch-typeahead":"0.4.2","mini-css-extract-plugin":"0.9.0","node-sass":"^4.14.1","optimize-css-assets-webpack-plugin":"5.0.3","pnp-webpack-plugin":"1.6.4","postcss-flexbugs-fixes":"4.1.0","postcss-loader":"3.0.0","postcss-normalize":"8.0.1","postcss-preset-env":"6.7.0","postcss-safe-parser":"4.0.1","resolve-url-loader":"3.1.1","rimraf":"^3.0.2","sass-loader":"8.0.2","scheduler":"^0.19.1","serve":"^11.3.2","style-loader":"0.23.1","terser-webpack-plugin":"2.3.5","ts-jest":"^26.1.0","ts-node-dev":"^1.0.0-pre.44","ts-pnp":"1.1.6","url-loader":"2.3.0","wasm-loader":"^1.3.0","wast-loader":"^1.9.0","webpack":"4.42.0","webpack-dev-server":"3.10.3","webpack-manifest-plugin":"2.2.0","workbox-webpack-plugin":"4.3.1"},"scripts":{"start":"node ./scripts/start.js","start:prod":"yarn build && serve -s build","build":"node ./scripts/build.js","deploy":"gh-pages -d build","lint":"eslint src --ext .ts,.tsx .","precommit":"tsc --noEmit && lint-staged","predeploy":"yarn build","test":"jest","typecheck":"yarn tsc --noEmit"},"lint-staged":{"src/**/*.{ts,tsx}":["pretty-quick --staged","eslint --fix"],"src/**/*.scss":["stylelint --syntax=scss","pretty-quick --staged"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"jest":{"roots":["<rootDir>/src"],"collectCoverageFrom":["src/**/*.{js,jsx,ts,tsx}","!src/**/*.d.ts"],"setupFiles":["react-app-polyfill/jsdom"],"setupFilesAfterEnv":["<rootDir>/src/setupTests.ts"],"testMatch":["<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}","<rootDir>/src/**/*.{spec,test}.{js,jsx,ts,tsx}"],"testEnvironment":"jest-environment-jsdom-fourteen","transform":{"^.+\\\\.(js|jsx|ts|tsx)$":"<rootDir>/node_modules/babel-jest","^.+\\\\.css$":"<rootDir>/config/jest/cssTransform.js","^(?!.*\\\\.(js|jsx|ts|tsx|css|json)$)":"<rootDir>/config/jest/fileTransform.js"},"transformIgnorePatterns":["[/\\\\\\\\]node_modules[/\\\\\\\\].+\\\\.(js|jsx|ts|tsx)$","^.+\\\\.module\\\\.(css|sass|scss)$"],"modulePaths":[],"moduleNameMapper":{"^react-native$":"react-native-web","^.+\\\\.module\\\\.(css|sass|scss)$":"identity-obj-proxy","^~/(.*)$":"<rootDir>/src/$1"},"moduleFileExtensions":["web.js","js","web.ts","ts","web.tsx","tsx","json","web.jsx","jsx","node"],"watchPlugins":["jest-watch-typeahead/filename","jest-watch-typeahead/testname"]},"babel":{"presets":["react-app"]}}')},122:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(12),s=n.n(c),l=n(4),i=n.n(l),u=n(8),d=n(3),m=n(30),f=n(31),p=n(61),b=n(40),v=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function c(e){try{l(a.next(e))}catch(t){r(t)}}function s(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}l((a=a.apply(e,t||[])).next())}))},g=function(e){return v(void 0,void 0,void 0,i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.arrayBuffer();case 5:return a=t.sent,t.next=8,Object(b.loadWASM)(a);case 8:case"end":return t.stop()}}),t)})))},y=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function c(e){try{l(a.next(e))}catch(t){r(t)}}function s(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}l((a=a.apply(e,t||[])).next())}))},j=function(){function e(t){var n=this;Object(m.a)(this,e),this._getGrammarDefinition=function(e){return y(n,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getLanguage(e);case 2:return n=t.sent,t.abrupt("return",{format:"json",content:n});case 4:case"end":return t.stop()}}),t,this)})))},this._typeCheck=function(e){return!!Object.keys(n._filePaths).includes(e)},this._filePaths=t.filePaths,this._registry=new p.Registry({getGrammarDefinition:this._getGrammarDefinition})}return Object(f.a)(e,[{key:"_getLanguage",value:function(e){return y(this,void 0,void 0,i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this._filePaths[e]);case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Something failed when doing a request to fetch the grammar file.");case 5:return t.next=7,n.text();case 7:return a=t.sent,t.abrupt("return",JSON.parse(a));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"loadGrammar",value:function(e){return y(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._typeCheck(e)){t.next=2;break}throw new Error('"'.concat(e,'" grammar is not supported. Please add scopename and path to Options.filePaths.'));case 2:return t.next=4,this._registry.loadGrammar(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"parse",value:function(e,t){return y(this,void 0,void 0,i.a.mark((function n(){var a,o,r,c,s,l,u,d,m,f;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadGrammar(t);case 2:for(a=n.sent,o=e.split("\n"),r={scopeName:t,lines:[]},s=0;s<o.length;s++){for(l=o[s],u=a.tokenizeLine(l,c),d={number:s,content:[]},m=function(e){var t=u.tokens[e],n={content:l.substring(t.startIndex,t.endIndex),scopes:t.scopes.filter((function(e,n){return t.scopes.indexOf(e)===n}))};d.content.push(n)},f=0;f<u.tokens.length;f++)m(f);r.lines.push(d),c=u.ruleStack}return n.abrupt("return",r);case 7:case"end":return n.stop()}}),n,this)})))}}]),e}(),_=n(1),h=n(114).default,k={"source.ts":"TypeScript","source.tsx":"TypeScript React","source.js":"JavaScript","source.jsx":"JavaScript React","source.css":"CSS","text.html.basic":"HTML","source.json":"JSON"},O=function(e){return"".concat(h.homepage,"/grammar/").concat(e)},S=new j({filePaths:{"source.ts":O("typescript.json"),"source.tsx":O("typescriptreact.json"),"source.js":O("javascript.json"),"source.jsx":O("javascriptreact.json"),"source.css":O("css.json"),"text.html.basic":O("html.json"),"source.json":O("json.json")}}),E=S,C=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,[{key:"get",value:function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"keys",value:function(){return Object.keys(localStorage)}}]),e}(),x=new C,w=x,N=function(e,t){return"".concat(e.toUpperCase(),"/").concat(t)},R=function(e){return N("atom",e)},I=function(e){return N("selector",e)},A=Object(_.atom)({key:R("Language"),default:"source.tsx"}),F=(Object(_.selector)({key:I("ReadibleLanguage"),get:function(e){var t=(0,e.get)(A);return k[t]}}),A),B=Object(_.atom)({key:R("RawCode"),default:"\nimport React from 'react';\nimport main from '~/state/main';\nimport { getAll } from '~/helpers/getAll';\nimport Button from '../../component/Button';\n\nimport './style.css';\n\ninterface Props {\n  title: string;\n  content: string;\n  onClick: (...args: any[]) => void,\n}\n\nconst Viewer: React.FC<Props>  = ({ title, content, onClick }) => {\n  return (\n    <div>\n      <h1>{title}</h1>\n\n      <p>{content}</p>\n\n      <button\n        type=\"button\"\n        onClick={onClick}\n        className=\"button\"\n        >\n          Well, what are you waiting for?\n        </button>\n    </div>\n  );\n}\n\nexport default Viewer;\n"}),V=Object(_.selector)({key:I("RawCode__Selector"),get:function(e){return(0,e.get)(B)},set:function(e,t){var n=e.set,a=e.get;n(B,t),w.set(R("RawCode"),a(B))}}),G=Object(_.atom)({key:R("EditCode"),default:!1}),P=Object(_.selector)({key:I("Code"),get:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(B),o=n(F),e.next=5,E.parse(a,o);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),D=(Object(_.atom)({key:R("SelectedSubline"),default:""}),P),L=n(2),M=Object(_.atom)({key:R("Theme"),default:"dark"}),T=Object(_.selector)({key:I("Theme"),get:function(e){return(0,e.get)(M)},set:function(e,t){var n=e.set,a=t;t instanceof _.DefaultValue&&(a="dark"),w.set(R("Theme"),a),n(M,a)}}),q="bold",J="italic",Q="underline",H=["button.background","button.foreground","button.hoverBackground","editor.background","editor.foreground","editor.selectionBackground","editor.selectionForeground","editorGutter.background","editorLineNumber.foreground","focusBorder","foreground","input.background","input.border","input.foreground","input.placeholderForeground","list.focusBackground","list.focusForeground","list.hoverBackground","list.hoverForeground","panel.background","panel.border","quickInput.background","quickInput.foreground","sideBar.background","sideBar.border","sideBar.foreground","statusBar.background","statusBar.border","statusBar.foreground","statusBarItem.activeBackground","statusBarItem.hoverBackground"],U=function(e,t){return{light:e,dark:t}},W={"button.background":U("#e36d6d","#e36d6d"),"button.foreground":U("#333333","#333333"),"button.hoverBackground":U("#b74e4e","#b74e4e"),"editor.background":U("#ffffff","#1c1c1c"),"editor.foreground":U("#333333","#ffffff"),"editor.selectionBackground":U("#f2d0a1","#efafaf"),"editor.selectionForeground":U("#333333","#ffffff"),"editorGutter.background":U("ffffff","#1c1c1c"),"editorLineNumber.foreground":U("#cccccc","#585858"),focusBorder:U("#e8e8e8","#171717"),foreground:U("#333333","#eeeeee"),"input.background":U("#ffffff","#2c2c2b"),"input.border":U("#d9d9d9","#141414"),"input.foreground":U("#333333","#ffffff"),"input.placeholderForeground":U("#999999","#737373"),"list.focusBackground":U("#d1d1d1","#525252"),"list.focusForeground":U("#333333","#cfcfcf"),"list.hoverBackground":U("#5c5c5c","#525252"),"list.hoverForeground":U("#333333","#eeeeee"),"panel.background":U("#ffffff","#2a2828"),"panel.border":U("#d9d9d9","#141414"),"quickInput.background":U("#f5f5f5","#242424"),"quickInput.foreground":U("#545454","#ffffff"),"sideBar.background":U("#ffffff","#111111"),"sideBar.border":U("#d9d9d9","#121212"),"sideBar.foreground":U("#333333","#f9f9f9"),"statusBar.background":U("#242424","#1a1a1a"),"statusBar.border":U("#878787","#000000"),"statusBar.foreground":U("#ffffff","#eeeeee"),"statusBarItem.activeBackground":U("#777777","#333333"),"statusBarItem.hoverBackground":U("#313131","#666666")},z=W,K=function(e,t){return{scope:e,color:z[e][t]}},$=Object(_.atomFamily)({key:R("GeneralScopesFamily"),default:Object(_.selectorFamily)({key:I("GeneralScopesFamily/Default"),get:function(e){return function(t){var n=(0,t.get)(T);return K(e,n)}}})}),Y=Object(_.selectorFamily)({key:I("GeneralScopeManager"),get:function(e){return function(t){var n=t.get;if(e)return n($(e))}},set:function(e){return function(t,n){var a=t.get,o=t.set;if(e){if(n instanceof _.DefaultValue){var r=a(T);return o($(e),Object(L.a)({},K(e,r))),void w.remove(R('GeneralScopesFamily__"'.concat(e,'"')))}o($(e),Object(L.a)(Object(L.a)({},n),{},{__meta:{touched:!0}}));var c=a($(e));w.set(R('GeneralScopesFamily__"'.concat(c.scope,'"')),c)}}}}),Z=Object(_.selector)({key:I("AllScopes"),get:function(e){var t=e.get;return H.map((function(e){return t(Y(e))}))}}),X=Y,ee=n(7),te=Object(_.atom)({key:R("RulesIds"),default:[],persistence_UNSTABLE:!0}),ne=Object(_.selector)({key:I("RulesIds"),get:function(e){return(0,e.get)(te)}}),ae=Object(_.selector)({key:I("RulesIds_SET"),get:function(e){return(0,e.get)(ne)},set:function(e,t){(0,e.set)(te,t||[]),w.set(R("RulesIds"),t||[])}}),oe=Object(_.atomFamily)({key:R("Rules"),default:{id:"",name:"",scope:[],settings:{foreground:"#000000",fontStyle:[]},__meta:{}}}),re=Object(_.selector)({key:I("AllRules"),get:function(e){var t=e.get;return t(te).map((function(e){return t(oe(e))}))}}),ce=Object(_.selectorFamily)({key:I("RuleManager"),get:function(e){return function(t){var n=t.get;if(e)return n(oe(e))}},set:function(e){return function(t,n){var a,o,r=t.set,c=t.get;if(e){var s=oe(e),l=c(te);if(l.includes(e)||r(ae,[].concat(Object(ee.a)(l),[e])),"deleted"===(null===(a=n)||void 0===a||null===(o=a.__meta)||void 0===o?void 0:o.state))return r(ae,l.filter((function(t){return t!==e}))),void w.remove(R('Rules__"'.concat(e,'"')));r(s,Object(L.a)(Object(L.a)({},n),{},{id:e,__meta:{touched:!0}})),w.set(R('Rules__"'.concat(e,'"')),c(s))}}}}),se=ce,le=n(5),ie=n.n(le),ue=n(41),de=n.n(ue),me=function(){var e=Object(_.useRecoilState)(V),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(G),c=Object(d.a)(o,1)[0],s=r.a.useRef(null);return r.a.useEffect((function(){var e;s&&(null===(e=s.current)||void 0===e||e.select())}),[c]),r.a.createElement("textarea",{ref:s,spellCheck:!1,className:ie()(de.a.textArea,de.a.codeText),onChange:function(e){return a(e.target.value)},value:n})},fe=n(6),pe=Object(_.atom)({key:R("EditRuleID"),default:""}),be=pe,ve=n(15),ge=function(e){return e?e.name?e.name:"string"===typeof e.scope?e.scope:"object"===typeof e.scope&&e.scope.length?e.scope[0]:"":""},ye=function(e){var t,n;return{id:e.id,name:ge(e),scope:(null===e||void 0===e?void 0:e.scope)||[],settings:{foreground:(null===e||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.foreground)||"#a0988a",fontStyle:(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.fontStyle)||[]}}},je=function(){return Object(_.useRecoilCallback)((function(e){var t=e.set,n=e.snapshot;return function(){var e=Object(u.a)(i.a.mark((function e(a){var o,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=((null===a||void 0===a?void 0:a.scope)||[]).map((function(e){var t=e.split(".");return t.pop(),t.join(".")})),e.next=3,n.getPromise(ne);case 3:for(r=e.sent,c=Object(ve.uniqueId)();r.includes(c);)c=Object(ve.uniqueId)();s=ye(Object(L.a)(Object(L.a)({},a),{},{id:c,scope:o})),t(se(c),s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[])},_e=function(e,t){var n=null;return e.forEach((function(e){var a=function(e,t){var n=Object(ee.a)(t),a=e.split(/ /g),o=[],r=0;return a.every((function(e){return Object(ee.a)(n).some((function(t){var a=function(e,t){if(e===t)return!0;var n=e+".";return n===t.substr(0,n.length)}(e,t);return n.splice(0,1),a&&o.push(r),r++,a}))}))?{query:e,scope:a.pop(),parents:a,matchIndexes:o}:null}(e,t);if(a)if(n){var o=n.matchIndexes[n.matchIndexes.length-1],r=a.matchIndexes[a.matchIndexes.length-1];(r>o||o===r&&function(e,t){if(e.scope!==t.scope)return e.scope.length-t.scope.length;if(e.parents.length!==t.parents.length)return e.parents.length-t.parents.length;for(var n=0;n<e.parents.length;n++)if(e.parents[n]!==t.parents[n])return e.parents[n].length-t.parents[n].length;return 0}(a,n)>0)&&(n=a)}else n=a})),n},he=function(e,t){var n=e.reduce((function(e,t){return[].concat(Object(ee.a)(e),Object(ee.a)(t.scope))}),[]),a=_e(n,t),o=null;return e.some((function(e){return!(!(null===a||void 0===a?void 0:a.query)||!e.scope.includes(a.query))&&(o=e,!0)})),o?{rule:o,query:a.query}:null},ke=n(32),Oe=n.n(ke),Se=Object(_.atom)({key:R("EditGeneralScopeID"),default:void 0}),Ee=Object(_.atom)({key:R("Mode"),default:"rules"}),Ce=Object(_.selector)({key:I("Mode"),get:function(e){return(0,e.get)(Ee)},set:function(e,t){var n=e.set;n(be,""),n(Se,""),n(Ee,t)}}),xe=Object(_.atom)({key:R("ActiveScope"),default:""}),we=Object(_.selector)({key:I("ActivateRuleByScope"),get:function(e){return(0,e.get)(xe)},set:function(e,t){var n=e.get,a=e.set,o=t;a(xe,o);var r=n(re),c=he(r,[o]);c&&(a(Ce,"rules"),a(be,c.rule.id))}}),Ne=Object(_.atom)({key:"scopesInfoState",default:[]}),Re=Object(_.selector)({key:"scopesInfoSelector",get:function(e){return(0,e.get)(Ne)},set:function(e,t){var n=e.set;(0,e.get)(He)||n(Ne,t)}}),Ie=function(){var e=Object(_.useRecoilValue)(re),t=Object(_.useRecoilValue)(Re),n=Object(_.useSetRecoilState)(we),a=Object(_.useRecoilValue)(be),o=Object(_.useRecoilState)(se(a)),c=Object(d.a)(o,2),s=c[0],l=c[1],i=je();return t.length?r.a.createElement("code",{className:Oe.a.info},Object(ee.a)(t).reverse().map((function(t,a){var o=!!he(e,[t]);return r.a.createElement("span",{className:ie()(Oe.a.scope,Object(fe.a)({},Oe.a.exists,o)),onClick:function(){return function(t){if(he(e,[t]))n(t);else if(s){var a=new RegExp("^".concat(t));if(s.scope.some((function(e){return a.test(e)})))return;var o=t.split(".");o.pop();var r=o.join(".");l(Object(L.a)(Object(L.a)({},s),{},{scope:[r].concat(Object(ee.a)(s.scope))}))}else i({scope:[t]})}(t)},key:"".concat(t,"-").concat(a)},t)}))):null},Ae=n(62),Fe=n.n(Ae),Be=r.a.memo((function(e){var t=e.lineNumber,n=e.children;return r.a.createElement("span",{className:"".concat(Fe.a.line," line-").concat(t)},n)})),Ve=n(9),Ge=n.n(Ve),Pe=function(e){return Ge.a.contrast(e||"white","black")>4.5?"#000000":"#ffffff"},De=n(42),Le=n.n(De),Me=function(e,t){var n=(e||"").split(".");return ie.a.apply(void 0,Object(ee.a)(n).concat([Le.a.subline,Object(fe.a)({},Le.a.empty,t)]))},Te=r.a.memo((function(e){var t=e.rules,n=e.scopes,a=e.content,o=e.selected,c=e.onClick,s=e.onHover,l=e.id,i=r.a.useState(""),u=Object(d.a)(i,2),m=u[0],f=u[1],p=r.a.useState(null),b=Object(d.a)(p,2),v=b[0],g=b[1];r.a.useEffect((function(){var e=he(t,n);g((null===e||void 0===e?void 0:e.rule)||null),f((null===e||void 0===e?void 0:e.query)||"")}),[n,t]);var y=Object(_.useRecoilValue)(X("editor.background")),j=!a.trim();return r.a.createElement("span",Object.assign({className:ie()(Me(m,j)),style:o?{backgroundColor:"".concat(Pe(y.color),"20")}:{}},j?{}:{onClick:function(){return c(n,v,l,o)},onMouseEnter:function(){return s(n)}}),a||" ")})),qe=function(){var e=Object(_.useRecoilValue)(ne);return Object(_.useRecoilCallback)((function(t){var n=t.set;return function(t){var a="string"===typeof t?t:null===t||void 0===t?void 0:t.id;a&&e.includes(a)?n(be,a):n(be,"")}}),[e])},Je=n(63),Qe=n.n(Je),He=Object(_.atom)({key:"selectedSubline",default:""}),Ue=function(){var e=Object(_.useRecoilValue)(re),t=Object(_.useRecoilValue)(D),n=Object(_.useRecoilState)(He),a=Object(d.a)(n,2),o=a[0],c=a[1],s=Object(_.useSetRecoilState)(Re),l=qe(),i=r.a.useCallback((function(e){s(e)}),[s]),u=r.a.useCallback((function(e,t,n,a){if(l(t||""),!a)return c(n),void s(e);c(""),s([])}),[s,c,l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:ie()(Qe.a.lineNumbers)},t.lines.map((function(e,t){return r.a.createElement("span",{key:t},t+1)}))),r.a.createElement("span",null,t.lines.map((function(t){return r.a.createElement(Be,{key:t.number,lineNumber:t.number},t.content.map((function(n,a){var c="".concat(t.number,'-"').concat(n.content,'"-').concat(a);return r.a.createElement(Te,Object.assign({rules:e,selected:c===o,key:c,id:c,onHover:i,onClick:u},n))})))}))))},We=n(20),ze=n.n(We),Ke=function(){var e=Object(_.useRecoilValue)(G);return r.a.createElement("div",{className:ze.a.outer},r.a.createElement("code",{className:ze.a.container},r.a.createElement("pre",{className:ie()(ze.a.code,ze.a.codeText)},e?r.a.createElement(me,null):r.a.createElement("div",{className:ze.a.codeWrapper},r.a.createElement(Ue,null)))))},$e=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"waiting for code")},r.a.createElement(Ke,null)))},Ye=n(65),Ze=n.n(Ye),Xe=function(e){var t=e.onClick,n=e.children;return r.a.createElement("li",{onClick:t},n)},et=function(){return Object(_.useRecoilCallback)((function(e){var t=e.reset,n=e.snapshot,a=e.set;return Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T),H.map((function(e){return t(X(e))})),e.next=4,n.getPromise(ne);case 4:e.sent.forEach(function(){var e=Object(u.a)(i.a.mark((function e(t){var o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise(se(t));case 2:(o=e.sent)&&(r=Object(L.a)(Object(L.a)({},o),{},{__meta:{state:"deleted"}}),a(se(t),r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))}))},tt=function(e){return"object"===typeof(null===e||void 0===e?void 0:e.colors)&&Array.isArray(e.tokenColors)&&e.tokenColors.every((function(e){return(Array.isArray(e.scope)&&e.scope.every((function(e){return"string"===typeof e}))||"string"===typeof e.scope)&&"object"===typeof e.settings&&("undefined"===typeof e.settings.fontStyle||"string"===typeof e.settings.fontStyle)&&"string"===typeof e.settings.foreground}))},nt=function(e){var t=e.target;return new Promise((function(e,n){var a;if(null===t||void 0===t||null===(a=t.files)||void 0===a?void 0:a.length){var o=new FileReader;o.onload=function(t){var n;e(JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result))},o.readAsText(t.files[0])}else n()}))},at=function(){var e=r.a.useRef(null),t=et(),n=Object(_.useRecoilCallback)((function(e){var t=e.set;return function(e){t(X(e.scope),e)}})),a=je(),o=function(){var e=Object(u.a)(i.a.mark((function e(o){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(o);case 2:if(r=e.sent,tt(r)){e.next=5;break}return e.abrupt("return");case 5:t(),Object.keys(r.colors).map((function(e){n({scope:e,color:r.colors[e]})})),r.tokenColors.forEach((function(e){var t=Object(L.a)(Object(L.a)({},e),{},{scope:Array.isArray(e.scope)?e.scope:[e.scope],settings:Object(L.a)(Object(L.a)({},e.settings),{},{fontStyle:e.settings.fontStyle?[e.settings.fontStyle]:[]})});a(t)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:e,type:"file",accept:"application/JSON",onChange:o,style:{display:"none"}}),r.a.createElement(Xe,{onClick:function(){var t;null===(t=e.current)||void 0===t||t.click()}},"Open"))},ot=function(e,t){var n=r.a.useCallback((function(n){var a,o=n.target;(null===(a=e.current)||void 0===a?void 0:a.contains(o))?t(!1):t(!0)}),[t,e]);r.a.useEffect((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[n])},rt=function(){var e=Object(_.useRecoilState)(G),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.createElement(Xe,{onClick:function(){a(!n)}},n?"Save preview":"Customize preview")},ct=function(e){return{name:e.name,colors:(t=e.generalScopes,t.reduce((function(e,t){return Object(L.a)(Object(L.a)({},e),{},Object(fe.a)({},t.scope,t.color))}),{})),semanticHighlighting:!0,tokenColors:e.rules.map((function(e){return function(e){return{name:e.name,scope:e.scope,settings:Object(L.a)(Object(L.a)({},e.settings.fontStyle.length>0?{fontStyle:e.settings.fontStyle.join(" ")}:{}),{},{foreground:e.settings.foreground})}}(e)})),type:e.type};var t},st=function(){var e=Object(_.useRecoilValue)(re),t=Object(_.useRecoilValue)(Z),n=Object(_.useRecoilValue)(T);return r.a.createElement(Xe,{onClick:function(){var a=ct({rules:e,generalScopes:t,name:"by https://github.com/el-angel/tmtheme-editor",type:n}),o=JSON.stringify(a,null,2),r=document.createElement("a"),c="data:text/json;charset=utf-8,"+encodeURIComponent(o);r.setAttribute("href",c),r.setAttribute("download","theme.json"),r.setAttribute("style","display: none;"),document.body.appendChild(r),r.click(),r.remove()}},"Export")},lt=n(64),it=n.n(lt),ut=function(e){var t=e.children,n=e.onClick;return r.a.createElement("button",{type:"button",className:ie()(it.a.button),onClick:n},t)},dt=n(33),mt=n.n(dt),ft=function(e){var t=e.onConfirm,n=e.onReject,a=e.children;return r.a.createElement("div",{className:mt.a.container},r.a.createElement("div",{className:mt.a.content},a),r.a.createElement("div",{className:mt.a.buttons},r.a.createElement(ut,{onClick:t},"Yes"),r.a.createElement(ut,{onClick:n},"No")))},pt=n(74),bt=n(34),vt=n.n(bt),gt=function(e){var t=e.children,n=e.onClose,a=e.closeOnOutsideClick,o=e.position,c=void 0===o?"top":o,s=e.overlay,l=r.a.useRef(null);return ot(l,(function(e){e&&a&&n()})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:l,className:ie()(vt.a.container,vt.a[c])},t),s&&r.a.createElement("div",{className:vt.a.overlay}))},yt=function(e){var t=e.children,n=e.target,a=void 0===n?_t():n,o=Object(pt.a)(e,["children","target"]);return r.a.useEffect((function(){return null===jt||void 0===jt||jt.appendChild(a),function(){null===jt||void 0===jt||jt.removeChild(a)}}),[a]),s.a.createPortal(r.a.createElement(gt,o,t),a)},jt=document.querySelector("#modal"),_t=function(){var e=Object(ve.uniqueId)(),t=document.createElement("div");return t.setAttribute("id","dialog__".concat(e)),t.setAttribute("data-dialog-id",e),t},ht=function(e,t){return function(){t&&t(),s.a.unmountComponentAtNode(e),null===jt||void 0===jt||jt.removeChild(e)}},kt=function(e){var t=_t(),n={onClose:ht(t),closeOnOutsideClick:!0,overlay:!0,position:"center"};return new Promise((function(a,o){var c=r.a.createElement(gt,n,r.a.createElement(ft,{onConfirm:ht(t,a),onReject:ht(t,o)},e||"Are you sure?"));s.a.render(c,t),null===jt||void 0===jt||jt.appendChild(t)}))},Ot=function(){var e=et();return r.a.createElement(Xe,{onClick:function(){kt().then((function(){e()}))}},"New")},St=n(16),Et=n.n(St),Ct=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilValue)(X("editor.background")),c=r.a.useRef(null);return ot(c,(function(e){e&&n&&a(!1)})),r.a.createElement("div",{className:Et.a.container},r.a.createElement("div",{className:Et.a.settingsIcon,onClick:function(){return a(!n)}},r.a.createElement(Ze.a,{style:{color:Pe(o.color),opacity:"0.5"}})),r.a.createElement("div",{ref:c,className:ie()(Et.a.menu,Object(fe.a)({},Et.a.open,n))},r.a.createElement("ul",null,r.a.createElement(Ot,null),r.a.createElement(at,null),r.a.createElement("li",{className:Et.a.divider}),r.a.createElement(rt,null),r.a.createElement("li",{className:Et.a.divider}),r.a.createElement(st,null))))},xt=n(67),wt=n.n(xt),Nt=n(25),Rt=n.n(Nt),It=function(e){var t=e.onChange,n=e.value,a=r.a.useRef(null),o=r.a.useCallback(Object(ve.debounce)((function(e){t(e)}),100),[t]),c=r.a.useCallback((function(e){o(e.target.value)}),[o]);return r.a.createElement("div",{className:Rt.a.container},r.a.createElement("div",{onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.click()},className:Rt.a.hexValue,style:{backgroundColor:n,color:Pe(n)}},n),r.a.createElement("div",{onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.click()},className:Rt.a.picker},r.a.createElement(wt.a,null)),r.a.createElement("input",{className:Rt.a.input,ref:a,type:"color",value:n,onChange:c}))},At=n(35),Ft=n.n(At),Bt=function(e){var t,n=e.value,a=e.onChange,o=void 0===a?function(){}:a,c=e.readonly,s=r.a.useState(!1),l=Object(d.a)(s,2),i=l[0],u=l[1],m=r.a.useState(n),f=Object(d.a)(m,2),p=f[0],b=f[1],v=r.a.useCallback((function(){c||u(!0)}),[c]),g=r.a.useCallback((function(){c||(u(!1),o(p))}),[o,c,p]),y=r.a.useCallback((function(e){c||"Enter"===e.key&&g()}),[g,c]);return r.a.useEffect((function(){b(n)}),[n]),r.a.createElement("div",null,r.a.createElement("input",{onClick:v,readOnly:!i||c,className:ie()(Ft.a.name,(t={},Object(fe.a)(t,Ft.a.editable,i&&!c),Object(fe.a)(t,Ft.a.readonly,c),t)),type:"text",value:p,onChange:function(e){return b(e.target.value)},onBlur:g,onKeyDown:y}))},Vt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Ge.a.scale(t).mode("lab").colors(12);return a},Gt=function(e){return[Vt(Ge.a.mix("#ffffff",e,.15).hex(),e,"#000000"),Vt(Ge.a.mix("red",e,.1).hex(),e,Ge.a.mix("cyan",e,.1).hex()),Vt(Ge.a.mix("green",e,.2).hex(),e,Ge.a.mix("magenta",e,.1).hex()),Vt(Ge.a.mix("blue",e,.2).hex(),e,Ge.a.mix("yellow",e,.1).hex())]},Pt=n(36),Dt=n.n(Pt),Lt=function(e){var t=e.color,n=e.onColorSelect,a=r.a.useState([]),o=Object(d.a)(a,2),c=o[0],s=o[1];return r.a.useEffect((function(){s(Gt(t))}),[t]),r.a.createElement("div",{className:Dt.a.container},c.map((function(e,t){return r.a.createElement("div",{className:Dt.a.swatchGroup,key:"group-".concat(t)},e.map((function(e,a){return r.a.createElement("div",{key:"".concat(t,"-").concat(a),className:Dt.a.swatch,onClick:function(){return n(e)},style:{backgroundColor:e}})})))})))},Mt=n(69),Tt=n.n(Mt),qt=n(68),Jt=n.n(qt),Qt=function(e){var t=e.children;return r.a.createElement("div",{className:Jt.a.item},t)},Ht=n(26),Ut=n.n(Ht),Wt=function(e){var t=e.children,n=e.onClose;return r.a.createElement("div",{className:Ut.a.container},r.a.createElement("div",{className:Ut.a.toolbar},r.a.createElement("div",null,r.a.createElement(Qt,null,"Settings")),r.a.createElement("div",null,r.a.createElement("span",{onClick:n,className:Ut.a.close},r.a.createElement(Tt.a,{style:{fontSize:"16px"}})))),r.a.createElement("div",{className:Ut.a.content},t))},zt=n(37),Kt=n.n(zt),$t=function(){var e=Object(_.useRecoilState)(Se),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(X(n)),c=Object(d.a)(o,2),s=c[0],l=c[1],i=r.a.useCallback((function(e){l(Object(L.a)(Object(L.a)({},s),{},{color:e}))}),[l,s]);return s&&n?r.a.createElement(Wt,{onClose:function(){return a(void 0)}},r.a.createElement("div",{className:Kt.a.left},r.a.createElement(Bt,{readonly:!0,value:s.scope})),r.a.createElement("div",{className:Kt.a.tools},r.a.createElement(It,{value:s.color,onChange:i})),r.a.createElement("div",{className:Kt.a.colorContainer},r.a.createElement(Lt,{color:s.color,onColorSelect:function(e){return i(e)}}))):null},Yt=n(70),Zt=n.n(Yt),Xt=n(71),en=n.n(Xt),tn=n(72),nn=n.n(tn),an=n(43),on=n.n(an),rn=(a={},Object(fe.a)(a,q,Zt.a),Object(fe.a)(a,J,en.a),Object(fe.a)(a,Q,nn.a),a),cn=function(e){var t=e.type,n=e.onClick,a=e.enabled,o=rn[t];return r.a.createElement("div",{onClick:n,className:ie()(on.a.icon,Object(fe.a)({},on.a.enabled,a))},r.a.createElement(o,null))},sn=n(27),ln=n.n(sn),un=function(e){var t=e.scopes,n=e.onDelete,a=e.existingScopes,o=Object(ee.a)(t).reverse();return r.a.createElement("div",null,o.map((function(e,t){var o=a.includes(e);return r.a.createElement("div",{className:ln.a.container,key:"".concat(e,"-").concat(t)},o&&r.a.createElement("span",{className:ln.a.warning,role:"img","aria-label":"warning"},"\u2757\ufe0f"),r.a.createElement("div",{className:ie()(ln.a.scope,Object(fe.a)({},ln.a.exists,o)),onClick:function(){return n(e)}},e))})))},dn=function(){var e=Object(_.useRecoilState)(be),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(_.useRecoilCallback)((function(e){var t=e.set,o=e.snapshot;return function(){var e=Object(u.a)(i.a.mark((function e(r){var c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="string"===typeof r?r:r.id,e.next=3,o.getPromise(se(c));case 3:(s=e.sent)&&(l=Object(L.a)(Object(L.a)({},s),{},{__meta:{state:"deleted"}}),t(se(c),l)),n===c&&a("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[n,a])},mn=function(e,t){if(!e.scope.length||!t.length)return[];var n=function(e){return e.reduce((function(e,t){return[].concat(Object(ee.a)(e),Object(ee.a)(t.scope))}),[])}(t);return n.length?e.scope.reduce((function(e,t){return function(e,t){return t.filter((function(t){return t===e})).length>=2}(t,n)?[].concat(Object(ee.a)(e),[t]):e}),[]):[]},fn=n(11),pn=n.n(fn),bn=["Enter",","],vn=function(){var e,t,n,a=Object(_.useRecoilValue)(re),o=dn(),c=qe(),s=Object(_.useRecoilValue)(be),l=Object(_.useRecoilValue)(se(s)),i=Object(_.useSetRecoilState)(se(s)),u=r.a.useState(""),m=Object(d.a)(u,2),f=m[0],p=m[1],b=r.a.useCallback((function(e){var t=Object(ee.a)(l.settings.fontStyle)||[];"string"===typeof t&&(t=[t]),t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),i(Object(L.a)(Object(L.a)({},l),{},{settings:Object(L.a)(Object(L.a)({},l.settings),{},{fontStyle:t})}))}),[i,l]),v=r.a.useCallback((function(e){i(Object(L.a)(Object(L.a)({},l),{},{settings:Object(L.a)(Object(L.a)({},l.settings),{},{foreground:e})}))}),[i,l]),g=r.a.useCallback((function(e){p(e.target.value)}),[p]),y=r.a.useCallback((function(e){bn.includes(e.key)&&(e.preventDefault(),i(Object(L.a)(Object(L.a)({},l),{},{scope:[f].concat(Object(ee.a)(l.scope))})),p(""))}),[i,l,f]);return(null===l||void 0===l?void 0:l.id)?r.a.createElement(Wt,{onClose:function(){return c()}},r.a.createElement("div",{className:pn.a.container},r.a.createElement("div",{className:pn.a.top},r.a.createElement("div",{className:pn.a.left},r.a.createElement("div",null,r.a.createElement(Bt,{value:l.name,onChange:function(e){return i(Object(L.a)(Object(L.a)({},l),{},{name:e}))}}),r.a.createElement("div",{className:pn.a.scopesList},r.a.createElement(un,{existingScopes:mn(l,a),scopes:l.scope,onDelete:function(e){var t=l.scope.findIndex((function(t){return t===e})),n=Object(ee.a)(l.scope);n.splice(t,1),i(Object(L.a)(Object(L.a)({},l),{},{scope:n}))}}))),r.a.createElement(ut,{onClick:function(){return o(l)}},"Delete")),r.a.createElement("div",{className:pn.a.tools},r.a.createElement("div",{className:pn.a.picker},r.a.createElement(It,{value:l.settings.foreground,onChange:v})),r.a.createElement(cn,{type:q,onClick:function(){return b(q)},enabled:(null===(e=l.settings.fontStyle)||void 0===e?void 0:e.includes(q))||!1}),r.a.createElement(cn,{type:J,onClick:function(){return b(J)},enabled:(null===(t=l.settings.fontStyle)||void 0===t?void 0:t.includes(J))||!1}),r.a.createElement(cn,{type:Q,onClick:function(){return b(Q)},enabled:(null===(n=l.settings.fontStyle)||void 0===n?void 0:n.includes(Q))||!1})),r.a.createElement("div",{className:pn.a.colorContainer},r.a.createElement(Lt,{color:l.settings.foreground,onColorSelect:function(e){return v(e)}}))),r.a.createElement("div",{className:pn.a.addScope},r.a.createElement("input",{className:pn.a.addScopeInput,type:"text",placeholder:"Add scope",value:f,onChange:g,onKeyDown:y})))):null},gn=function(){return"general"===Object(_.useRecoilValue)(Ce)?r.a.createElement($t,null):r.a.createElement(vn,null)},yn=n(21),jn=n.n(yn),_n=function(e){var t=e.isActive,n=e.onClick,a=void 0===n?function(){}:n,o=e.title,c=e.color,s=e.showWarning,l=void 0!==s&&s;return r.a.createElement("div",{className:ie()(jn.a.container,Object(fe.a)({},jn.a.active,t)),onClick:a},r.a.createElement("div",null,l&&r.a.createElement("span",{className:jn.a.warning},"\u2757\ufe0f"),r.a.createElement("code",{className:jn.a.name},o)),r.a.createElement("div",{className:jn.a.color,style:{backgroundColor:c}}))},hn=function(e){var t,n=e.scope,a=Object(_.useRecoilState)(X(n)),o=Object(d.a)(a,1)[0],c=Object(_.useRecoilState)(Se),s=Object(d.a)(c,2),l=s[0],i=s[1],u=(null===(t=o)||void 0===t?void 0:t.scope)===l;return o?r.a.createElement(r.a.Fragment,null,r.a.createElement(_n,{isActive:u,onClick:function(){return i(o.scope)},title:o.scope,color:o.color})):null},kn=function(){return r.a.createElement(r.a.Fragment,null,H.map((function(e){return r.a.createElement(hn,{scope:e,key:e})})))},On=function(e){var t=e.id,n=e.name,a=e.settings,o=e.scope,c=qe(),s=Object(_.useRecoilValue)(re),l=Object(_.useRecoilValue)(be),i=mn({id:t,name:n,settings:a,scope:o},s),u=l===t;return r.a.createElement(_n,{isActive:u,onClick:function(){u||c(t)},title:n,color:a.foreground,showWarning:!!i.length})},Sn=function(){var e=Object(_.useRecoilValue)(re);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(On,Object.assign({key:e.id},e))})))},En=n(17),Cn=n.n(En),xn=function(){var e=Object(_.useRecoilState)(Ce),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:Cn.a.toolbar},r.a.createElement("div",{className:Cn.a.header},r.a.createElement("div",{className:ie()(Cn.a.item,Object(fe.a)({},Cn.a.isActive,"rules"===n)),onClick:function(){return a("rules")}},"Rules"),r.a.createElement("div",{className:ie()(Cn.a.item,Object(fe.a)({},Cn.a.isActive,"general"===n)),onClick:function(){return a("general")}},"General")))},wn=n(44),Nn=n.n(wn),Rn=Object(_.selector)({key:I("GeneralScopesCSS"),get:function(e){var t=e.get,n=H.reduce((function(e,n){var a=t(X(n)),o=a.scope,r=a.color,c="--".concat(o.replace(/\./,"-"));return"\n        ".concat(e,"\n        ").concat(c,": ").concat(r,";\n      ").trim()}),"");return"\n      :root {\n        ".concat(n,"\n      }\n    ")}}),In=function(e){return Object.keys(e).reduce((function(t,n){var a=e[n];return t+=".".concat(n," {\n"),Object.keys(a).map((function(e){var n=e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t+="".concat(n,": ").concat(a[e],";\n")})),t+="}\n",t+="\n"}),"")},An=Object(_.selector)({key:I("RulesCSS"),get:function(e){var t=(0,e.get)(re).reduce((function(e,t){var n=t.scope.reduce((function(e,n){var a,o,r,c={color:t.settings.foreground};return(null===(a=t.settings.fontStyle)||void 0===a?void 0:a.includes(q))&&(c.fontWeight="bold"),(null===(o=t.settings.fontStyle)||void 0===o?void 0:o.includes(J))&&(c.fontStyle="italic"),(null===(r=t.settings.fontStyle)||void 0===r?void 0:r.includes(Q))&&(c.textDecoration="underline"),Object(L.a)(Object(L.a)({},e),{},Object(fe.a)({},n.replace(/ /g,"."),c))}),{});return Object(L.a)(Object(L.a)({},e),n)}),{});return In(t)}}),Fn=function(){var e=Object(_.useRecoilValue)(Ce),t=Object(_.useRecoilValue)(An),n=Object(_.useRecoilValue)(Rn);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(xn,null)),r.a.createElement("div",{className:Nn.a.content},r.a.createElement("style",{type:"text/css"},t),r.a.createElement("style",{type:"text/css"},n),r.a.createElement("div",{className:Nn.a.rules},"rules"===e&&r.a.createElement(Sn,null),"general"===e&&r.a.createElement(kn,null)),r.a.createElement(Ie,null)))},Bn=Object(_.atom)({key:R("ModalIds"),default:[]}),Vn=Object(_.atomFamily)({key:R("ModalState__Family"),default:!1}),Gn=Object(_.selectorFamily)({key:I("GetModalState__Family"),get:function(e){return function(t){return(0,t.get)(Vn(e))}},set:function(e){return function(t,n){var a=t.set,o=(0,t.get)(Bn);o.includes(e)||a(Bn,[].concat(Object(ee.a)(o),[e])),n&&o.forEach((function(t){t!==e&&a(Vn(t),!1)})),a(Vn(e),n)}}}),Pn=n(73),Dn=n.n(Pn),Ln=function(e){var t=e.children,n=e.onClick;return r.a.createElement("div",{onClick:n,className:Dn.a.item},t)},Mn=n(18),Tn=n.n(Mn),qn=function(e){var t=e.value,n=e.options,a=e.onSelect,o=e.onClose,c=e.inputProps,s=n.findIndex((function(e){return e.value===t})),l=r.a.useState(s),i=Object(d.a)(l,2),u=i[0],m=i[1],f=r.a.useCallback((function(e){if(["Enter","ArrowUp","ArrowDown","Escape"].includes(e.key))return e.preventDefault(),"Escape"==e.key&&o(),"Enter"===e.key&&a(n[u]),"ArrowUp"===e.key?0===u?void m(n.length-1):void m(u-1):"ArrowDown"===e.key?u===n.length-1?void m(0):void m(u+1):void 0}),[u,o,a,n]);return r.a.useEffect((function(){return window.addEventListener("keydown",f),function(){window.removeEventListener("keydown",f)}}),[u,f]),r.a.createElement("div",{className:Tn.a.container},r.a.createElement("div",{className:Tn.a.inputContainer},r.a.createElement("input",Object.assign({},c,{className:Tn.a.input}))),r.a.createElement("div",{className:Tn.a.optionContainer},n.map((function(e,t){return r.a.createElement("div",{onClick:function(){return a(e)},className:ie()(Tn.a.option,Object(fe.a)({},Tn.a.focussed,u===t)),key:e.value},e.label)}))))},Jn=Object.keys(k).map((function(e){return{value:e,label:k[e]}})),Qn=function(){var e=Object(_.useRecoilState)(Gn("language")),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(F),c=Object(d.a)(o,2),s=c[0],l=c[1];if(!n)return null;return r.a.createElement(yt,{closeOnOutsideClick:!0,onClose:function(){return a(!1)}},r.a.createElement(qn,{value:s,options:Jn,onSelect:function(e){l(e.value),a(!1)},onClose:function(){return a(!1)},inputProps:{placeholder:"Select language mode",readOnly:!0}}))},Hn=[{label:"Dark",value:"dark"},{label:"Light",value:"light"}],Un=function(){var e=Object(_.useRecoilState)(Gn("themeStyle")),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(T),c=Object(d.a)(o,2),s=c[0],l=c[1];if(!n)return null;return r.a.createElement(yt,{closeOnOutsideClick:!0,onClose:function(){return a(!1)}},r.a.createElement(qn,{value:s,options:Hn,onSelect:function(e){l(e.value),a(!1)},onClose:function(){return a(!1)},inputProps:{placeholder:"Select theme style",readOnly:!0}}))},Wn=n(45),zn=n.n(Wn),Kn=function(){var e=Object(_.useRecoilState)(Gn("language")),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(Gn("themeStyle")),c=Object(d.a)(o,2),s=c[0],l=c[1],i=Object(_.useRecoilValue)(F),u=Object(_.useRecoilState)(T),m=Object(d.a)(u,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qn,null),r.a.createElement(Un,null),r.a.createElement("div",{className:zn.a.container},r.a.createElement("div",{className:"left"},"main*"),r.a.createElement("div",{className:"right"},r.a.createElement(Ln,{onClick:function(){return l(!s)}},"Style: ".concat(m)),r.a.createElement(Ln,{onClick:function(){return a(!n)}},k[i]),r.a.createElement(Ln,null,r.a.createElement("a",{className:zn.a.c_est_moi,href:"http://github.com/el-angel",target:"_blank",rel:"noopener noreferrer"},"el angel @ github")))))},$n=n(13),Yn=n.n($n),Zn="".concat("/textmate-editor","/onigasm.wasm"),Xn=function(e){var t=e.set,n=w.keys(),a=w.get(R("RulesIds"))||[];t(ae,a),n.forEach((function(e){if(e!==R("RulesIds")){if(e.includes(R("Rules_"))){var n=w.get(e);a.includes(n.id)&&t(se(n.id),n)}if(e.includes(R("GeneralScopesFamily"))){var o=w.get(e);t(X(o.scope),o)}if(e.includes(R("RawCode"))){var r=w.get(e);t(V,r)}if(e.includes(R("Theme"))){var c=w.get(e);t(T,c)}}}))},ea=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.useEffect((function(){var e=document.querySelector("body");e&&e.setAttribute("style","overflow: hidden"),n||Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Zn);case 2:a(!0);case 3:case"end":return e.stop()}}),e)})))()}),[n]),n?r.a.createElement(_.RecoilRoot,{initializeState:Xn},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Yn.a.container},r.a.createElement("div",{className:Yn.a.sidebar},r.a.createElement(Fn,null)),r.a.createElement("div",{className:Yn.a.main},r.a.createElement("div",{className:Yn.a.settings},r.a.createElement(Ct,null)),r.a.createElement("div",{className:Yn.a.code},r.a.createElement($e,null)),r.a.createElement("div",{className:Yn.a.bottom},r.a.createElement(gn,null))),r.a.createElement("div",{className:Yn.a.statusbar},r.a.createElement(Kn,null))))):r.a.createElement("div",null,"starting up...")};n(122);s.a.render(r.a.createElement(o.Profiler,{id:"Application",onRender:function(){}},r.a.createElement(r.a.StrictMode,null,r.a.createElement(ea,null))),document.getElementById("root"))},13:function(e,t,n){e.exports={container:"src-App-module__container--1cmbG",settings:"src-App-module__settings--1nmKj",statusbar:"src-App-module__statusbar--3npHX",editor:"src-App-module__editor--34Nb6",sidebar:"src-App-module__sidebar--3M66T",main:"src-App-module__main--1deVu",code:"src-App-module__code--3ZpfS",bottom:"src-App-module__bottom--1WuIW"}},16:function(e,t,n){e.exports={container:"src-containers-Code-components-SettingsMenu-styles-module__container--MUak9",settingsIcon:"src-containers-Code-components-SettingsMenu-styles-module__settingsIcon--1G-on",menu:"src-containers-Code-components-SettingsMenu-styles-module__menu--Ltlvy",open:"src-containers-Code-components-SettingsMenu-styles-module__open--1_VRL",divider:"src-containers-Code-components-SettingsMenu-styles-module__divider--dPTSa",disabled:"src-containers-Code-components-SettingsMenu-styles-module__disabled--17qzT"}},17:function(e,t,n){e.exports={toolbar:"src-containers-Sidebar-components-Toolbar-styles-module__toolbar--2AdAR",item:"src-containers-Sidebar-components-Toolbar-styles-module__item--1nUc-",header:"src-containers-Sidebar-components-Toolbar-styles-module__header--13FeJ",isActive:"src-containers-Sidebar-components-Toolbar-styles-module__isActive--3Ab5T"}},18:function(e,t,n){e.exports={container:"src-components-ui-QuickInput-styles-module__container--1Aa5a",inputContainer:"src-components-ui-QuickInput-styles-module__inputContainer--2umYE",input:"src-components-ui-QuickInput-styles-module__input--1KI_v",optionContainer:"src-components-ui-QuickInput-styles-module__optionContainer--15Stj",option:"src-components-ui-QuickInput-styles-module__option--wNZOe",focussed:"src-components-ui-QuickInput-styles-module__focussed--2dH3h"}},20:function(e,t,n){e.exports={outer:"src-containers-Code-components-Editor-styles-module__outer--1UYCi",container:"src-containers-Code-components-Editor-styles-module__container--VNZe8",code:"src-containers-Code-components-Editor-styles-module__code--37_HL",codeWrapper:"src-containers-Code-components-Editor-styles-module__codeWrapper--3wuPA",lineNumbers:"src-containers-Code-components-Editor-styles-module__lineNumbers--2h937"}},21:function(e,t,n){e.exports={container:"src-components-ui-SidebarItem-styles-module__container--lXls6",active:"src-components-ui-SidebarItem-styles-module__active--N5965",warning:"src-components-ui-SidebarItem-styles-module__warning--3fvW9",name:"src-components-ui-SidebarItem-styles-module__name--2knuo",color:"src-components-ui-SidebarItem-styles-module__color--1LlRK",input:"src-components-ui-SidebarItem-styles-module__input--QbbuG"}},25:function(e,t,n){e.exports={container:"src-containers-Settings-components-ColorPicker-styles-module__container--12gp1",hexValue:"src-containers-Settings-components-ColorPicker-styles-module__hexValue--3CP6L",picker:"src-containers-Settings-components-ColorPicker-styles-module__picker--bnJQn",input:"src-containers-Settings-components-ColorPicker-styles-module__input--3NUnP"}},26:function(e,t,n){e.exports={container:"src-components-ui-Panel-styles-module__container--3vp3o",content:"src-components-ui-Panel-styles-module__content--k6t2C",toolbar:"src-components-ui-Panel-styles-module__toolbar--2ITeY",close:"src-components-ui-Panel-styles-module__close--3MMcq"}},27:function(e,t,n){e.exports={container:"src-containers-Settings-components-ScopesList-styles-module__container--3ihuh",warning:"src-containers-Settings-components-ScopesList-styles-module__warning--1nJRm",scope:"src-containers-Settings-components-ScopesList-styles-module__scope--qBa_H"}},32:function(e,t,n){e.exports={info:"src-containers-Code-components-Info-styles-module__info--3xlGJ",exists:"src-containers-Code-components-Info-styles-module__exists--3VmjJ",scope:"src-containers-Code-components-Info-styles-module__scope--1-8iE",copied:"src-containers-Code-components-Info-styles-module__copied--gGiOl"}},33:function(e,t,n){e.exports={container:"src-components-ui-Confirm-styles-module__container--2HI1S",content:"src-components-ui-Confirm-styles-module__content--1zDtw",buttons:"src-components-ui-Confirm-styles-module__buttons--3uFxF"}},34:function(e,t,n){e.exports={container:"src-components-ui-Modal-styles-module__container--1EaRg",center:"src-components-ui-Modal-styles-module__center--3Yb4Y",overlay:"src-components-ui-Modal-styles-module__overlay--3xlyo"}},35:function(e,t,n){e.exports={name:"src-containers-Settings-components-NameInput-styles-module__name--1gvp1",readonly:"src-containers-Settings-components-NameInput-styles-module__readonly--SGwZO",editable:"src-containers-Settings-components-NameInput-styles-module__editable--2FQvN"}},36:function(e,t,n){e.exports={container:"src-containers-Settings-components-Swatches-styles-module__container--2Hm-F",swatchGroup:"src-containers-Settings-components-Swatches-styles-module__swatchGroup--1JCNi",swatch:"src-containers-Settings-components-Swatches-styles-module__swatch--3rU5e"}},37:function(e,t,n){e.exports={container:"src-containers-Settings-GeneralSettings-styles-module__container--16REN",colorContainer:"src-containers-Settings-GeneralSettings-styles-module__colorContainer--32t1O",top:"src-containers-Settings-GeneralSettings-styles-module__top--1CXDV",left:"src-containers-Settings-GeneralSettings-styles-module__left--Ci30q",delete:"src-containers-Settings-GeneralSettings-styles-module__delete--2vFdO",tools:"src-containers-Settings-GeneralSettings-styles-module__tools--2DMa8",scopesList:"src-containers-Settings-GeneralSettings-styles-module__scopesList--3rO8d",addScope:"src-containers-Settings-GeneralSettings-styles-module__addScope--1iFQw"}},41:function(e,t,n){e.exports={codeText:"src-containers-Code-components-CodeInput-styles-module__codeText--264Ou",textArea:"src-containers-Code-components-CodeInput-styles-module__textArea--1s8Rs"}},42:function(e,t,n){e.exports={subline:"src-containers-Code-components-SubLine-styles-module__subline--1Q-lo",empty:"src-containers-Code-components-SubLine-styles-module__empty--3DWOQ"}},43:function(e,t,n){e.exports={icon:"src-containers-Settings-components-FontStyle-styles-module__icon--3eRzC",enabled:"src-containers-Settings-components-FontStyle-styles-module__enabled--1Hm9S"}},44:function(e,t,n){e.exports={rules:"src-containers-Sidebar-styles-module__rules--1B94Y",content:"src-containers-Sidebar-styles-module__content--1QxK2"}},45:function(e,t,n){e.exports={container:"src-containers-StatusBar-styles-module__container--2kClV",c_est_moi:"src-containers-StatusBar-styles-module__c_est_moi--2yqZl"}},62:function(e,t,n){e.exports={line:"src-containers-Code-components-Line-styles-module__line--BdjKc"}},63:function(e,t,n){e.exports={container:"src-containers-Code-components-CodeView-styles-module__container--1ApKT",code:"src-containers-Code-components-CodeView-styles-module__code--1GDsG",lineNumbers:"src-containers-Code-components-CodeView-styles-module__lineNumbers--yU7cG"}},64:function(e,t,n){e.exports={button:"src-components-ui-Button-styles-module__button--33mOU"}},68:function(e,t,n){e.exports={item:"src-components-ui-PanelItem-styles-module__item--l0pOa"}},73:function(e,t,n){e.exports={item:"src-containers-StatusBar-components-Item-styles-module__item--3N6sp"}},76:function(e,t,n){e.exports=n(124)}},[[76,1,2]]]);
//# sourceMappingURL=main.3961064f.chunk.js.map