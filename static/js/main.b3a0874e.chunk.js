/*! For license information please see main.b3a0874e.chunk.js.LICENSE.txt */
(this["webpackJsonp@anche/theme-editor"]=this["webpackJsonp@anche/theme-editor"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return k}));var a=n(9),o=n.n(a),c=(n(68),n(12)),i=n.n(c),s=function(e){if(!e.match("^(\\w+[-_\\w+]*|\\*)(\\.\\w+[-_\\w+]*)*(\\:\\w+[-_\\w+]*)?$"))throw new Error(e+" is not a valid selector.");for(var t,n=e.length,r=e.length,a=[];n>=0;n--){var o=e[n];if("."===o||":"===o){var c=e.substring(n+1,r);r=n,":"===o?t=c:a.push(c)}}return{type:e.substring(0,r),modifiers:a.reverse(),language:t}};function l(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var f=function(e){var t=e.type,n=e.modifiers,r=e.language;return d([t],d(n).sort()).join(".")+(void 0!==r?":"+r:"")};!function(){function e(e){this._raw=e.code,this._lines=e.code.split(/[\n\r]/g)}e.prototype.getTextAtPosition=function(e){var t=e.line,n=e.start,r=e.length;return this._lines[t].substr(n,r)},e.prototype.length=function(){return this._raw.length},e.prototype.getLines=function(){return this._lines},e.prototype.getRaw=function(){return this._raw}}();(function(e,t,n){e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&n.path)}},n.exports),n.exports})((function(t){var n="win32"===e.platform;function r(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r];a&&"."!==a&&(".."===a?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(a))}return n}function a(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var r=t;r>=0&&!e[r];r--);return 0===n&&r===t?e:n>r?[]:e.slice(n,r+1)}var o=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,s={};function l(e){var t=o.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",a=c.exec(r);return[n,a[1],a[2],a[3]]}function u(e){var t=o.exec(e),n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function d(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}s.resolve=function(){for(var t="",n="",a=!1,o=arguments.length-1;o>=-1;o--){var c;if(o>=0?c=arguments[o]:t?(c=Object({NODE_ENV:"production",PUBLIC_URL:"/theme-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"http://localhost:3001"})["="+t])&&c.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(c=t+"\\"):c=e.cwd(),!i.a.isString(c))throw new TypeError("Arguments to path.resolve must be strings");if(c){var s=u(c),l=s.device,f=s.isUnc,m=s.isAbsolute,p=s.tail;if((!l||!t||l.toLowerCase()===t.toLowerCase())&&(t||(t=l),a||(n=p+"\\"+n,a=m),t&&a))break}}return f&&(t=d(t)),t+(a?"\\":"")+(n=r(n.split(/[\\\/]+/),!a).join("\\"))||"."},s.normalize=function(e){var t=u(e),n=t.device,a=t.isUnc,o=t.isAbsolute,c=t.tail,i=/[\\\/]$/.test(c);return(c=r(c.split(/[\\\/]+/),!o).join("\\"))||o||(c="."),c&&i&&(c+="\\"),a&&(n=d(n)),n+(o?"\\":"")+c},s.isAbsolute=function(e){return u(e).isAbsolute},s.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!i.a.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var r=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),s.normalize(r)},s.relative=function(e,t){e=s.resolve(e),t=s.resolve(t);for(var n=e.toLowerCase(),r=t.toLowerCase(),o=a(t.split("\\")),c=a(n.split("\\")),i=a(r.split("\\")),l=Math.min(c.length,i.length),u=l,d=0;d<l;d++)if(c[d]!==i[d]){u=d;break}if(0==u)return t;var f=[];for(d=u;d<c.length;d++)f.push("..");return(f=f.concat(o.slice(u))).join("\\")},s._makeLong=function(e){if(!i.a.isString(e))return e;if(!e)return"";var t=s.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},s.dirname=function(e){var t=l(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},s.basename=function(e,t){var n=l(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},s.extname=function(e){return l(e)[3]},s.format=function(e){if(!i.a.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.a.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,r=e.base||"";return n?n[n.length-1]===s.sep?n+r:n+s.sep+r:r},s.parse=function(e){if(!i.a.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=l(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},s.sep="\\",s.delimiter=";";var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m={};function p(e){return f.exec(e).slice(1)}m.resolve=function(){for(var t="",n=!1,a=arguments.length-1;a>=-1&&!n;a--){var o=a>=0?arguments[a]:e.cwd();if(!i.a.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o[0])}return(n?"/":"")+(t=r(t.split("/"),!n).join("/"))||"."},m.normalize=function(e){var t=m.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=r(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},m.isAbsolute=function(e){return"/"===e.charAt(0)},m.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!i.a.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return m.normalize(e)},m.relative=function(e,t){e=m.resolve(e).substr(1),t=m.resolve(t).substr(1);for(var n=a(e.split("/")),r=a(t.split("/")),o=Math.min(n.length,r.length),c=o,i=0;i<o;i++)if(n[i]!==r[i]){c=i;break}var s=[];for(i=c;i<n.length;i++)s.push("..");return(s=s.concat(r.slice(c))).join("/")},m._makeLong=function(e){return e},m.dirname=function(e){var t=p(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},m.basename=function(e,t){var n=p(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},m.extname=function(e){return p(e)[3]},m.format=function(e){if(!i.a.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.a.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+m.sep:"")+(e.base||"")},m.parse=function(e){if(!i.a.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=p(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},m.sep="/",m.delimiter=":",t.exports=n?s:m,t.exports.posix=m,t.exports.win32=s})),o.a.ScriptTarget.Latest,o.a.ModuleResolutionKind.NodeJs,o.a.JsxEmit.React;var m=[];m[0]="class",m[1]="enum",m[2]="interface",m[3]="namespace",m[4]="typeParameter",m[5]="type",m[6]="parameter",m[7]="variable",m[8]="enumMember",m[9]="property",m[10]="function",m[11]="member";var p=[];p[0]="declaration",p[1]="static",p[2]="async",p[3]="readonly",p[4]="defaultLibrary",p[5]="local";var v=[],b=function(e,t){var n=s(e);if(!function(e){return!!m.some((function(t){return t===e.type}))&&!(e.modifiers&&!e.modifiers.every((function(e){return p.some((function(t){return t===e}))})))}(n))throw new Error(e+" is not a valid token. Either the pattern or type/modifier is invalid.");v.push({token:n,fallbackScopes:t})},g={},y=function(e,t){var n,r,a=0;if(void 0!==e.language){if(e.language!==t.language)return-1;a+=10}if("*"!==e.type){if(-1===function(e){var t=g[e];return t||(g[e]=t=[e]),t}(t.type).indexOf(e.type))return-1;a+=100}try{for(var o=l(e.modifiers),c=o.next();!c.done;c=o.next()){var i=c.value;if(-1===t.modifiers.indexOf(i))return-1}}catch(s){n={error:s}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a+100*e.modifiers.length},h=function(e,t){var n=void 0;return t.forEach((function(t){var r=y(e,t);r>((null===n||void 0===n?void 0:n.score)||0)&&(n={token:t,score:r})})),g={},n},_=function(e){var t=void 0;return v.forEach((function(n){var r=y(e,n.token);r>((null===t||void 0===t?void 0:t.score)||0)&&(t={token:n,score:r})})),null===t||void 0===t?void 0:t.token},k=Object.freeze({__proto__:null,getMatch:h,getFallback:_,matchToken:function(e,t){var n="string"===typeof e?s(e):e,r=h(n,t);if(r)return{token:r.token};var a=_(n);return a?{fallbackScopes:a.fallbackScopes}:void 0}}),j=Object.freeze({__proto__:null,vscode:function(e){e("namespace",["entity.name.namespace"]),e("type",["entity.name.type","support.type"]),e("class",["entity.name.type.class","support.class"]),e("interface",["entity.name.type.interface"]),e("enum",["entity.name.type.enum"]),e("typeParameter",["entity.name.type.parameter"]),e("function",["entity.name.function","support.function"]),e("member",["entity.name.function.member","support.function"]),e("variable",["variable.other.readwrite","entity.name.variable"]),e("parameter",["variable.parameter"]),e("property",["variable.other.property"]),e("enumMember",["variable.other.enummember"]),e("variable.readonly",["variable.other.constant"]),e("property.readonly",["variable.other.constant.property"]),e("type.defaultLibrary",["support.type"]),e("class.defaultLibrary",["support.class"]),e("interface.defaultLibrary",["support.class"]),e("variable.defaultLibrary",["support.variable","support.other.variable"]),e("variable.defaultLibrary.readonly",["support.constant"]),e("property.defaultLibrary",["support.variable.property"]),e("property.defaultLibrary.readonly",["support.constant.property"]),e("function.defaultLibrary",["support.function"]),e("member.defaultLibrary",["support.function"])}}),O=function(e){e(b)}}).call(this,n(27),"/")},,,,function(e,t,n){e.exports={container:"src-components-ui-PanelSettings-styles-module__container--2s6wc",colorContainer:"src-components-ui-PanelSettings-styles-module__colorContainer--2jxb-",top:"src-components-ui-PanelSettings-styles-module__top--Tg_UT",left:"src-components-ui-PanelSettings-styles-module__left--3lzTS",tools:"src-components-ui-PanelSettings-styles-module__tools--1nTYV",picker:"src-components-ui-PanelSettings-styles-module__picker--deSrj",delete:"src-components-ui-PanelSettings-styles-module__delete--10n54",scopesList:"src-components-ui-PanelSettings-styles-module__scopesList--3H8ij",addScope:"src-components-ui-PanelSettings-styles-module__addScope--1BtAX",addScopeInput:"src-components-ui-PanelSettings-styles-module__addScopeInput--3b6yj"}},function(e,t,n){e.exports={toolbar:"src-containers-Sidebar-components-Toolbar-styles-module__toolbar--2AdAR",item:"src-containers-Sidebar-components-Toolbar-styles-module__item--1nUc-",header:"src-containers-Sidebar-components-Toolbar-styles-module__header--13FeJ",isActive:"src-containers-Sidebar-components-Toolbar-styles-module__isActive--3Ab5T"}},,,function(e,t,n){e.exports={info:"src-containers-Code-components-Info-styles-module__info--3xlGJ",header:"src-containers-Code-components-Info-styles-module__header--6SBua",scope:"src-containers-Code-components-Info-styles-module__scope--1-8iE",exists:"src-containers-Code-components-Info-styles-module__exists--3VmjJ"}},function(e,t,n){e.exports={container:"src-App-module__container--1cmbG",settings:"src-App-module__settings--1nmKj",statusbar:"src-App-module__statusbar--3npHX",editor:"src-App-module__editor--34Nb6",sidebar:"src-App-module__sidebar--3M66T",main:"src-App-module__main--1deVu",code:"src-App-module__code--3ZpfS",bottom:"src-App-module__bottom--1WuIW"}},,function(e,t,n){e.exports={container:"src-containers-Code-components-SettingsMenu-styles-module__container--MUak9",settingsIcon:"src-containers-Code-components-SettingsMenu-styles-module__settingsIcon--1G-on",menu:"src-containers-Code-components-SettingsMenu-styles-module__menu--Ltlvy",open:"src-containers-Code-components-SettingsMenu-styles-module__open--1_VRL",divider:"src-containers-Code-components-SettingsMenu-styles-module__divider--dPTSa",disabled:"src-containers-Code-components-SettingsMenu-styles-module__disabled--17qzT"}},function(e,t,n){e.exports={container:"src-components-ui-SidebarItem-styles-module__container--lXls6",active:"src-components-ui-SidebarItem-styles-module__active--N5965",warning:"src-components-ui-SidebarItem-styles-module__warning--3fvW9",nameContainer:"src-components-ui-SidebarItem-styles-module__nameContainer--MuCJ5",name:"src-components-ui-SidebarItem-styles-module__name--2knuo",color:"src-components-ui-SidebarItem-styles-module__color--1LlRK",input:"src-components-ui-SidebarItem-styles-module__input--QbbuG"}},function(e,t,n){e.exports={container:"src-components-ui-QuickInput-styles-module__container--1Aa5a",inputContainer:"src-components-ui-QuickInput-styles-module__inputContainer--2umYE",input:"src-components-ui-QuickInput-styles-module__input--1KI_v",optionContainer:"src-components-ui-QuickInput-styles-module__optionContainer--15Stj",option:"src-components-ui-QuickInput-styles-module__option--wNZOe",focussed:"src-components-ui-QuickInput-styles-module__focussed--2dH3h"}},,function(e,t,n){e.exports={outer:"src-containers-Code-components-Editor-styles-module__outer--1UYCi",container:"src-containers-Code-components-Editor-styles-module__container--VNZe8",code:"src-containers-Code-components-Editor-styles-module__code--37_HL",codeWrapper:"src-containers-Code-components-Editor-styles-module__codeWrapper--3wuPA",lineNumbers:"src-containers-Code-components-Editor-styles-module__lineNumbers--2h937"}},,,,,function(e,t,n){e.exports={container:"src-containers-Settings-components-ColorPicker-styles-module__container--12gp1",hexValue:"src-containers-Settings-components-ColorPicker-styles-module__hexValue--3CP6L",picker:"src-containers-Settings-components-ColorPicker-styles-module__picker--bnJQn",input:"src-containers-Settings-components-ColorPicker-styles-module__input--3NUnP"}},function(e,t,n){e.exports={container:"src-containers-Settings-components-ScopesList-styles-module__container--3ihuh",warning:"src-containers-Settings-components-ScopesList-styles-module__warning--1nJRm",scope:"src-containers-Settings-components-ScopesList-styles-module__scope--qBa_H"}},function(e,t,n){e.exports={container:"src-components-ui-Panel-styles-module__container--3vp3o",content:"src-components-ui-Panel-styles-module__content--k6t2C",toolbar:"src-components-ui-Panel-styles-module__toolbar--2ITeY",close:"src-components-ui-Panel-styles-module__close--3MMcq"}},,,,function(e,t,n){e.exports={container:"src-components-ui-Confirm-styles-module__container--2HI1S",content:"src-components-ui-Confirm-styles-module__content--1zDtw",buttons:"src-components-ui-Confirm-styles-module__buttons--3uFxF"}},function(e,t,n){e.exports={container:"src-components-ui-Modal-styles-module__container--1EaRg",center:"src-components-ui-Modal-styles-module__center--3Yb4Y",overlay:"src-components-ui-Modal-styles-module__overlay--3xlyo"}},function(e,t,n){e.exports={container:"src-containers-Code-components-SettingsMenu-Items-styles-module__container--5EeNM",status:"src-containers-Code-components-SettingsMenu-Items-styles-module__status--1nw_0",active:"src-containers-Code-components-SettingsMenu-Items-styles-module__active--18XJs",enabled:"src-containers-Code-components-SettingsMenu-Items-styles-module__enabled--YD5OL",inactive:"src-containers-Code-components-SettingsMenu-Items-styles-module__inactive--3Rb7Q",loading:"src-containers-Code-components-SettingsMenu-Items-styles-module__loading--3nIhQ"}},function(e,t,n){e.exports={name:"src-containers-Settings-components-NameInput-styles-module__name--1gvp1",readonly:"src-containers-Settings-components-NameInput-styles-module__readonly--SGwZO",editable:"src-containers-Settings-components-NameInput-styles-module__editable--2FQvN"}},function(e,t,n){e.exports={container:"src-containers-Settings-components-Swatches-styles-module__container--2Hm-F",swatchGroup:"src-containers-Settings-components-Swatches-styles-module__swatchGroup--1JCNi",swatch:"src-containers-Settings-components-Swatches-styles-module__swatch--3rU5e"}},function(e,t,n){e.exports={container:"src-containers-Sidebar-components-FilterAdd-styles-module__container--1Wqn8",input:"src-containers-Sidebar-components-FilterAdd-styles-module__input--5Lwzv",addButton:"src-containers-Sidebar-components-FilterAdd-styles-module__addButton--1jJlf"}},,,,,function(e,t,n){e.exports={codeText:"src-containers-Code-components-CodeInput-styles-module__codeText--264Ou",textArea:"src-containers-Code-components-CodeInput-styles-module__textArea--1s8Rs"}},function(e,t,n){e.exports={subline:"src-containers-Code-components-SubLine-styles-module__subline--1Q-lo",empty:"src-containers-Code-components-SubLine-styles-module__empty--3DWOQ"}},function(e,t,n){e.exports={icon:"src-containers-Settings-components-FontStyle-styles-module__icon--3eRzC",enabled:"src-containers-Settings-components-FontStyle-styles-module__enabled--1Hm9S"}},function(e,t,n){e.exports={rules:"src-containers-Sidebar-styles-module__rules--1B94Y",content:"src-containers-Sidebar-styles-module__content--1QxK2"}},function(e,t,n){e.exports={container:"src-containers-StatusBar-styles-module__container--2kClV",c_est_moi:"src-containers-StatusBar-styles-module__c_est_moi--2yqZl"}},,,function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=54},,,,,,,,,,,,,,,,function(e,t,n){e.exports={button:"src-components-ui-Button-styles-module__button--33mOU"}},function(e,t,n){e.exports={line:"src-containers-Code-components-Line-styles-module__line--BdjKc"}},function(e,t,n){e.exports={container:"src-containers-Code-components-CodeView-styles-module__container--1ApKT",code:"src-containers-Code-components-CodeView-styles-module__code--1GDsG",lineNumbers:"src-containers-Code-components-CodeView-styles-module__lineNumbers--yU7cG"}},,,,,,,function(e,t,n){e.exports={item:"src-components-ui-PanelItem-styles-module__item--l0pOa"}},,,function(e,t,n){e.exports={item:"src-containers-StatusBar-components-Item-styles-module__item--3N6sp"}},,,function(e,t,n){e.exports=n(139)},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),c=n.n(o),i=n(4),s=n.n(i),l=n(7),u=n(3),d=n(67),f=n(11),m=n(46),p=n(69);function v(e,t,n,r){return new(n||(n=Promise))((function(a,o){function c(e){try{s(r.next(e))}catch(t){o(t)}}function i(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((r=r.apply(e,t||[])).next())}))}function b(e,t){var n,r,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function g(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}var h,_,k,j=function(e){return v(void 0,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return t=m.loadWASM,[4,(r=e,v(void 0,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,fetch(r)];case 1:return[4,e.sent().arrayBuffer()];case 2:return[2,e.sent()]}}))})))];case 1:return[4,t.apply(void 0,[n.sent()])];case 2:return n.sent(),[2]}var r}))}))},O=function(e,t){var n=y(e),r=t.split(/ /g),a=[],o=0;return r.every((function(e){return y(n).some((function(t){var r=function(e,t){if(e===t)return!0;var n=e+".";return n===t.substr(0,n.length)}(e,t);return n.splice(0,1),r&&a.push(o),o++,r}))}))?{query:t,scope:r.pop(),parents:r,matchIndexes:a}:null},S=function(e,t){if(e.scope!==t.scope)return e.scope.length-t.scope.length;if(e.parents.length!==t.parents.length)return e.parents.length-t.parents.length;for(var n=0;n<e.parents.length;n++)if(e.parents[n]!==t.parents[n])return e.parents[n].length-t.parents[n].length;return 0},E=function(e,t){for(var n="string"===typeof e?[e]:e,r=[],a=0,o=t.length;a<o;a++)r=y(r,t[a].scopes);var c=function(e,t){for(var n=null,r=0,a=t.length;r<a;r++){var o=O(e,t[r]);if(o)if(n){var c=n.matchIndexes[n.matchIndexes.length-1],i=o.matchIndexes[o.matchIndexes.length-1];(i>c||c===i&&S(o,n)>0)&&(n=o)}else n=o}return n}(n,r);if(!c)return null;var i=null;return t.some((function(e){return!!e.scopes.includes(c.query)&&(i=e,!0)})),i},C=function(){function e(e){this._raw=e.code,this._lines=e.code.split(/[\n\r]/g)}return e.prototype.getTextAtPosition=function(e){var t=e.line,n=e.start,r=e.length;return this._lines[t].substr(n,r)},e.prototype.length=function(){return this._raw.length},e.prototype.getLines=function(){return this._lines},e.prototype.getRaw=function(){return this._raw},e}(),x=function(){function e(e){var t=this;this._getGrammarDefinition=function(e){return v(t,void 0,void 0,(function(){var t,n,r;return b(this,(function(a){switch(a.label){case 0:return[4,this._getLanguageFile(e)];case 1:t=a.sent();try{n=JSON.parse(t),r="json"}catch(o){n=t,r="plist"}return[2,{format:r,content:n}]}}))}))},this._typeCheck=function(e){return!!Object.keys(t._filePaths).includes(e)},this._filePaths=e.filePaths,this._registry=new p.Registry({getGrammarDefinition:this._getGrammarDefinition})}return e.prototype._getLanguageFile=function(e){return v(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,fetch(this._filePaths[e])];case 1:if(!(t=n.sent()).ok)throw new Error("Something failed when doing a request to fetch the grammar file.");return[4,t.text()];case 2:return[2,n.sent()]}}))}))},e.prototype.loadGrammar=function(e){return v(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:if(!this._typeCheck(e))throw new Error('"'+e+'" grammar is not supported. Please add scopename and path to Options.filePaths.');return[4,this._registry.loadGrammar(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.parse=function(e,t){return v(this,void 0,void 0,(function(){var n,r,a,o,c,i,s,l,u,d;return b(this,(function(f){switch(f.label){case 0:return[4,this.loadGrammar(t)];case 1:for(n=f.sent(),r=new C({code:e}),a=e.split("\n"),o={code:r,tokens:[]},i=0;i<a.length;i++){for(s=a[i],l=n.tokenizeLine(s,c),u=function(e){var t=l.tokens[e],n={start:t.startIndex,line:i,length:t.endIndex-t.startIndex,scopes:t.scopes.filter((function(e,n){return t.scopes.indexOf(e)===n}))};o.tokens.push(n)},d=0;d<l.tokens.length;d++)u(d);c=l.ruleStack}return[2,o]}}))}))},e}(),w=n(1),N=n(35),R=n(36),I=new(function(){function e(){Object(N.a)(this,e)}return Object(R.a)(e,[{key:"get",value:function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"keys",value:function(){return Object.keys(localStorage)}}]),e}()),T={"source.ts":"TypeScript","source.tsx":"TypeScript React","source.js":"JavaScript","source.jsx":"JavaScript React","source.css":"CSS","text.html.basic":"HTML","source.json":"JSON"},A=function(e){return"".concat("/theme-editor","/grammar/").concat(e)},L=new x({filePaths:{"source.ts":A("TypeScript.tmLanguage.json"),"source.tsx":A("TypeScriptReact.tmLanguage.json"),"source.js":A("JavaScript.tmLanguage.json"),"source.jsx":A("JavaScriptReact.tmLanguage.json"),"source.css":A("css.tmLanguage.json"),"text.html.basic":A("html.tmLanguage.json"),"source.json":A("JSON.tmLanguage.json")}}),P=function(e,t,n){return"".concat(e.toUpperCase(),"/").concat(t,"/").concat(n)},B=function(e,t){return P("atom",e,t)},F=function(e,t){return P("selector",e,t)},V=Object(w.atom)({key:B("Language","lang"),default:"source.tsx"}),D=(Object(w.selector)({key:F("Language","Processed"),get:function(e){var t=(0,e.get)(V);return T[t]}}),V),M=Object(w.atom)({key:B("Code","Raw"),default:"import React from 'react';\nimport main from '~/state/main';\nimport { getAll } from '~/helpers/getAll';\nimport Button from '../../component/Button';\n\nimport './style.css';\n\ninterface Props {\n  title: string;\n  content: string;\n  onClick: (...args: any[]) => void,\n}\n\nconst Viewer: React.FC<Props>  = ({ title, content, onClick }) => {\n  return (\n    <div>\n      <h1>{title}</h1>\n\n      <p>{content}</p>\n\n      <button\n        type=\"button\"\n        onClick={onClick}\n        className=\"button\"\n        >\n          Well, what are you waiting for?\n        </button>\n    </div>\n  );\n}\n\nexport default Viewer;\n"}),G=Object(w.selector)({key:F("Code","RawSelector"),get:function(e){return(0,e.get)(M)},set:function(e,t){var n=e.set,r=e.get;n(M,t),I.set(B("Code","Raw"),r(M))}}),U=Object(w.atom)({key:B("Code","Edit"),default:!1}),J=Object(w.selector)({key:F("Code","Parsed"),get:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,r=n(M),a=n(D),e.next=5,L.parse(r,a);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),q=(Object(w.atom)({key:B("Code","SelectedSubline"),default:""}),J),z=Object(w.atom)({key:B("Theme","_"),default:"dark"}),W=Object(w.selector)({key:F("Theme","Style"),get:function(e){return(0,e.get)(z)},set:function(e,t){var n=e.set,r=t;t instanceof w.DefaultValue&&(r="dark"),I.set(B("Theme","_"),r),n(z,r)}});(_=h||(h={})).Bold="bold",_.Italic="italic",_.Underline="underline",function(e){e[e.SemanticToken=0]="SemanticToken",e[e.Rule=1]="Rule",e[e.GeneralScope=2]="GeneralScope"}(k||(k={}));var H,Q=["button.background","button.foreground","button.hoverBackground","editor.background","editor.foreground","editor.selectionBackground","editor.selectionForeground","editorGutter.background","editorLineNumber.foreground","focusBorder","foreground","input.background","input.border","input.foreground","input.placeholderForeground","list.focusBackground","list.focusForeground","list.hoverBackground","list.hoverForeground","panel.background","panel.border","quickInput.background","quickInput.foreground","sideBar.background","sideBar.border","sideBar.foreground","statusBar.background","statusBar.border","statusBar.foreground","statusBarItem.activeBackground","statusBarItem.hoverBackground"],K=function(e,t){return{light:e,dark:t}},Y={"button.background":K("#e36d6d","#e36d6d"),"button.foreground":K("#333333","#333333"),"button.hoverBackground":K("#b74e4e","#b74e4e"),"editor.background":K("#ffffff","#1c1c1c"),"editor.foreground":K("#333333","#ffffff"),"editor.selectionBackground":K("#f2d0a1","#efafaf"),"editor.selectionForeground":K("#333333","#ffffff"),"editorGutter.background":K("ffffff","#1c1c1c"),"editorLineNumber.foreground":K("#cccccc","#585858"),focusBorder:K("#e8e8e8","#171717"),foreground:K("#333333","#eeeeee"),"input.background":K("#ffffff","#2c2c2b"),"input.border":K("#d9d9d9","#141414"),"input.foreground":K("#333333","#ffffff"),"input.placeholderForeground":K("#999999","#737373"),"list.focusBackground":K("#d1d1d1","#525252"),"list.focusForeground":K("#333333","#cfcfcf"),"list.hoverBackground":K("#5c5c5c","#525252"),"list.hoverForeground":K("#333333","#eeeeee"),"panel.background":K("#ffffff","#2a2828"),"panel.border":K("#d9d9d9","#141414"),"quickInput.background":K("#f5f5f5","#242424"),"quickInput.foreground":K("#545454","#ffffff"),"sideBar.background":K("#ffffff","#111111"),"sideBar.border":K("#d9d9d9","#121212"),"sideBar.foreground":K("#333333","#f9f9f9"),"statusBar.background":K("#242424","#1a1a1a"),"statusBar.border":K("#878787","#000000"),"statusBar.foreground":K("#ffffff","#eeeeee"),"statusBarItem.activeBackground":K("#777777","#333333"),"statusBarItem.hoverBackground":K("#313131","#666666")},Z=n(2),$=n(8),X=function(e){var t=e.state,n=e.default,r=t.toUpperCase(),a=Object(w.atom)({key:B(r,"Ids"),default:[]}),o=Object(w.selector)({key:F(r,"Ids_SEL"),get:function(e){return(0,e.get)(a)},set:function(e,t){(0,e.set)(a,t||[]),I.set(B(r,"Ids"),t||[])}}),c=Object(w.atomFamily)({key:B(r,"State"),default:n}),i=Object(w.selector)({key:F(r,"All"),get:function(e){var t=e.get;return t(o).map((function(e){return t(s(e))}))}}),s=Object(w.selectorFamily)({key:F(r,"Entity"),get:function(e){return function(t){var n=t.get;if(e)return n(c(e))}},set:function(e){return function(t,n){var a,i=t.set,s=t.get;if(e)if(n instanceof w.DefaultValue)i(c(e),n);else{var l=c(e),u=s(o);if(u.includes(e)||i(o,[].concat(Object($.a)(u),[e])),"deleted"===(null===n||void 0===n||null===(a=n.__meta)||void 0===a?void 0:a.state))return i(o,u.filter((function(t){return t!==e}))),void I.remove(B(r,'id__"'.concat(e,'"')));i(l,Object(Z.a)(Object(Z.a)({},n),{},{id:e,__meta:Object(Z.a)({touched:!0},n.__meta)})),I.set(B(r,'id__"'.concat(e,'"')),s(l))}}}});return{TREE_ID:r,entityIds:o,getEntities:i,getEntity:s}},ee=X({state:"GeneralScopes",default:Object(w.selectorFamily)({key:F("GeneralScopes","Family/Default"),get:function(e){return function(t){var n=(0,t.get)(W),r=function(e,t){return{id:e,color:Y[e][t]||""}}(e,n);return{id:r.id,scope:r.id,settings:{foreground:r.color},__meta:{type:k.GeneralScope}}}}})}),te=ee.TREE_ID,ne=ee.getEntities,re=ee.getEntity,ae=X({state:"rules",default:{id:"",name:"",scope:[],settings:{foreground:"#000000",fontStyle:[]},__meta:{type:k.Rule}}}),oe=ae.TREE_ID,ce=ae.getEntities,ie=ae.getEntity,se=ae.entityIds,le=n(10),ue=new(function(){function e(){Object(N.a)(this,e),this._baseUrl="http://localhost:3001",this._active=!1,this.ping()}return Object(R.a)(e,[{key:"ping",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetch("/ping");case 2:return t=e.sent,e.next=5,t.json();case 5:return(null===(n=e.sent)||void 0===n?void 0:n.success)?this._active=!0:this._active=!1,e.abrupt("return",this._active);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isBackendActive",value:function(){return this._active}},{key:"get",value:function(e,t){return this._request(e,Object(Z.a)(Object(Z.a)({},t),{},{method:"get"}))}},{key:"post",value:function(e,t){return this._request(e,Object(Z.a)(Object(Z.a)({},t),{},{headers:{"Content-Type":"application/json"},method:"post"}))}},{key:"_fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.fetch("".concat(this._baseUrl).concat(e),Object(Z.a)({},t))}},{key:"_request",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},this._isActive()){e.next=3;break}throw new Error("Backend is not available.");case 3:return e.next=5,this._fetch(t,n);case 5:return r=e.sent,e.next=8,r.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isActive",value:function(){return this._active||console.warn("Backend is not active. Start the server and refresh the page."),this._active}}]),e}()),de={semanticTokensState:function(e){return ue.post("/sh",{body:JSON.stringify(e)})},ping:function(){return ue.get("/ping")}};!function(e){e[e.Active=0]="Active",e[e.Enabled=1]="Enabled",e[e.Inactive=2]="Inactive",e[e.Loading=3]="Loading"}(H||(H={}));var fe,me,pe=Object(w.atom)({key:B("semanticTokens","_State"),default:H.Active}),ve=Object(w.selector)({key:F("semanticTokens","Tokens"),get:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get,n(pe)===H.Active){e.next=4;break}return e.abrupt("return");case 4:return r=n(G),e.prev=5,e.next=8,de.semanticTokensState({code:r,language:"tsx"});case 8:return a=e.sent,o=Object(le.groupBy)(null===a||void 0===a?void 0:a.tokens,"line"),c={},Object.keys(o).forEach((function(e){c[e]=Object(le.groupBy)(o[e],"start")})),e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}()}),be=X({state:"semantic",default:{id:"",scope:"",settings:{foreground:"#000000",fontStyle:[]},__meta:{type:k.SemanticToken}}}),ge=be.TREE_ID,ye=be.getEntities,he=be.getEntity,_e=be.entityIds,ke=n(6),je=n.n(ke),Oe=n(47),Se=n.n(Oe),Ee=function(){var e=Object(w.useRecoilState)(G),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(w.useRecoilState)(U),c=Object(u.a)(o,1)[0],i=a.a.useRef(null);return a.a.useEffect((function(){var e;i&&(null===(e=i.current)||void 0===e||e.select())}),[c]),a.a.createElement("textarea",{ref:i,spellCheck:!1,className:je()(Se.a.textArea,Se.a.codeText),onChange:function(e){return r(e.target.value)},value:n})},Ce=n(5),xe=Object(w.atom)({key:B("Mode","_"),default:k.Rule}),we=Object(w.selector)({key:F("Mode","Value"),get:function(e){return(0,e.get)(xe)},set:function(e,t){var n=e.set;n(Re,void 0),n(xe,t)}}),Ne=Object(w.atom)({key:B("Settings","Entity"),default:void 0}),Re=Object(w.selector)({key:F("Settings","Entity"),get:function(e){return(0,e.get)(Ne)},set:function(e,t){var n=e.set;!t||t instanceof w.DefaultValue?n(Ne,void 0):(n(we,t.__meta.type),n(Ne,t))}}),Ie=n(70),Te=n.n(Ie),Ae=function(e){var t=e.children,n=e.onClick,r=e.className;return a.a.createElement("button",{type:"button",className:je()(Te.a.button,r),onClick:n},t)},Le=n(37),Pe=n.n(Le),Be=function(e){var t=e.onConfirm,n=e.onReject,r=e.children;return a.a.createElement("div",{className:Pe.a.container},a.a.createElement("div",{className:Pe.a.content},r),a.a.createElement("div",{className:Pe.a.buttons},a.a.createElement(Ae,{onClick:t},"Yes"),a.a.createElement(Ae,{onClick:n},"No")))},Fe=n(83),Ve=function(e,t){var n=a.a.useCallback((function(n){var r,a=n.target;(null===(r=e.current)||void 0===r?void 0:r.contains(a))?t(!1):t(!0)}),[t,e]);a.a.useEffect((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[n])},De=n(38),Me=n.n(De),Ge=function(e){var t=e.children,n=e.onClose,r=e.closeOnOutsideClick,o=e.position,c=void 0===o?"top":o,i=e.overlay,s=a.a.useRef(null);return Ve(s,(function(e){e&&r&&n()})),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:s,className:je()(Me.a.container,Me.a[c])},t),i&&a.a.createElement("div",{className:Me.a.overlay}))},Ue=function(e){var t=e.children,n=e.target,r=void 0===n?qe():n,o=Object(Fe.a)(e,["children","target"]);return a.a.useEffect((function(){return null===Je||void 0===Je||Je.appendChild(r),function(){null===Je||void 0===Je||Je.removeChild(r)}}),[r]),c.a.createPortal(a.a.createElement(Ge,o,t),r)},Je=document.querySelector("#modal"),qe=function(){var e=Object(le.uniqueId)(),t=document.createElement("div");return t.setAttribute("id","dialog__".concat(e)),t.setAttribute("data-dialog-id",e),t},ze=function(e,t){return function(){t&&t(),c.a.unmountComponentAtNode(e),null===Je||void 0===Je||Je.removeChild(e)}},We=function(e){var t=qe(),n={onClose:ze(t),closeOnOutsideClick:!0,overlay:!0,position:"center"};return new Promise((function(r,o){var i=a.a.createElement(Ue,n,a.a.createElement(Be,{onConfirm:ze(t,r),onReject:ze(t,o)},e||"Are you sure?"));c.a.render(i,t),null===Je||void 0===Je||Je.appendChild(t)}))},He=function(e){return e?e.name?e.name:"string"===typeof e.scope?e.scope:"object"===typeof e.scope&&e.scope.length?e.scope[0]:"":""},Qe=function(e,t){for(var n,r,a=t.existingIds,o=t.filterScope,c=void 0!==o&&o?((null===e||void 0===e?void 0:e.scope)||[]).map((function(e){var t=e.split(".");return t.pop(),t.join(".")})):(null===e||void 0===e?void 0:e.scope)||[],i=Object(le.uniqueId)();a.includes(i);)i=Object(le.uniqueId)();return{id:i,name:He(e),scope:c,settings:{foreground:(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.foreground)||"#a0988a",fontStyle:(null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.fontStyle)||[]},__meta:{type:k.Rule}}},Ke=function(e,t){var n,r;if(!e.scope)throw new Error("Can't create token without a scope");Object(f.b)(e.scope);for(var a=t.existingIds,o=Object(le.uniqueId)();a.includes(o);)o=Object(le.uniqueId)();return{id:o,scope:e.scope,settings:{foreground:(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.foreground)||"#a0988a",fontStyle:(null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.fontStyle)||[]},__meta:{type:k.SemanticToken}}},Ye=function(){return Object(w.useRecoilCallback)((function(e){var t=e.set,n=e.snapshot;return function(){var e=Object(l.a)(s.a.mark((function e(r){var a,o,c,i,l,u,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.input,o=r.filterScope,c=void 0!==o&&o,(i=r.type)!==k.Rule){e.next=7;break}return e.next=4,n.getPromise(se);case 4:u=e.sent,l=Qe(a,{existingIds:u,filterScope:c}),t(ie(l.id),l);case 7:if(i!==k.SemanticToken){e.next=20;break}return e.next=10,n.getPromise(_e);case 10:d=e.sent,e.prev=11,f=Ke(a,{existingIds:d}),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(11),We(e.t0.message),e.abrupt("return");case 19:t(he(f.id),f);case 20:return e.abrupt("return",l);case 21:case"end":return e.stop()}}),e,null,[[11,15]])})));return function(t){return e.apply(this,arguments)}}()}),[])},Ze=function(){return Object(w.useRecoilCallback)((function(e){var t=e.set;return function(e){t(Re,e||void 0)}}),[])},$e=n(19),Xe=n.n($e),et=Object(w.atom)({key:B(oe,"ActiveScope"),default:""}),tt=Object(w.selector)({key:F(oe,"ActivateRuleByScope"),get:function(e){return(0,e.get)(et)},set:function(e,t){var n=e.get,r=e.set,a=t;r(et,a);var o=n(ce),c=E(a,o.map((function(e){return{rule:e,scopes:e.scope}})));c&&(r(we,"rules"),r(Re,c.rule))}}),nt=Object(w.atom)({key:B("Info","TextMateScopes"),default:[]}),rt=Object(w.atom)({key:B("Info","SemanticToken"),default:""}),at=Object(w.selector)({key:F("Info","Scopes"),get:function(e){var t=e.get,n=t(nt),r=t(rt);return{selected:t(ht),textmateScopes:n,semanticToken:r}},set:function(e,t){var n=e.set,r=e.get,a=e.reset;if(t instanceof w.DefaultValue)n(nt,[]);else{var o=r(ht);if(!o||t.selected){if(o===t.selected)return a(ht),void a(nt);n(ht,t.selected||""),n(nt,t.textmateScopes),n(rt,t.semanticToken)}}}}),ot=function(){var e=Object(w.useRecoilValue)(ce),t=Object(w.useRecoilValue)(ye),n=Ze(),r=Object(w.useRecoilValue)(at),o=r.textmateScopes,c=r.semanticToken,i=Object(w.useSetRecoilState)(tt),d=Object(w.useRecoilValue)(Re),m=Object(w.useRecoilState)(ie(null===d||void 0===d?void 0:d.id)),p=Object(u.a)(m,2),v=p[0],b=p[1],g=Ye(),y=function(){var e=Object(l.a)(s.a.mark((function e(r){var a,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.map((function(e){return Object(Z.a)(Object(Z.a)({},e),Object(f.b)(e.scope))})),null===(o=f.e.matchToken(r,a))||void 0===o?void 0:o.token){e.next=9;break}return c={scope:r},e.next=6,g({input:c,filterScope:!0,type:k.SemanticToken});case 6:i=e.sent,console.log("semantic token added",i),n(i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:Xe.a.info},c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:Xe.a.header},"semantic token"),a.a.createElement("span",{className:je()(Xe.a.scope,Object(Ce.a)({},Xe.a.exists,!1)),onClick:function(){return y(c)}},c)),!!o.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:Xe.a.header},"textmate scopes"),Object($.a)(o).reverse().map((function(t,n){var r=!!E(t,e.map((function(e){return{rule:e,scopes:e.scope}})));return a.a.createElement("span",{className:je()(Xe.a.scope,Object(Ce.a)({},Xe.a.exists,r)),onClick:function(){return function(t){if(E(t,e.map((function(e){return{rule:e,scopes:e.scope}}))))i(t);else if(v){var n=new RegExp("^".concat(t));if(v.scope.some((function(e){return n.test(e)})))return;var r=t.split(".");r.pop();var a=r.join(".");b(Object(Z.a)(Object(Z.a)({},v),{},{scope:[a].concat(Object($.a)(v.scope))}))}else{g({input:{scope:[t]},filterScope:!0,type:k.Rule})}}(t)},key:"".concat(t,"-").concat(n)},t)}))))},ct=n(71),it=n.n(ct),st=a.a.memo((function(e){var t=e.lineNumber,n=e.children;return a.a.createElement("span",{className:"".concat(it.a.line," line-").concat(t)},n)})),lt=n(13),ut=n.n(lt),dt=function(e){return ut.a.contrast(e||"white","black")>4.5?"#000000":"#ffffff"},ft=n(48),mt=n.n(ft),pt=function(e){return je()(mt.a.subline,Object(Ce.a)({},mt.a.empty,e))},vt=Object(w.selectorFamily)({key:"ENTITY_SELECTOR",get:function(e){var t=e.id,n=e.type;return function(e){var r=e.get;return n===k.SemanticToken?r(he(t)):r(ie(t||""))}}}),bt=a.a.memo((function(e){var t,n,r,o=e.scopes,c=e.selected,i=e.onClick,s=e.onHover,l=e.id,u=e.children,d=e.semanticTokenStateId,m=e.semanticToken,p=e.ruleStateId,v=Object(w.useRecoilValue)(vt({id:d||p,type:d?k.SemanticToken:k.Rule})),b=Object(w.useRecoilValue)(re("editor.background")),g=!u.trim(),y=m?Object(f.c)(m[0]):"",_=Object(Z.a)({color:null===v||void 0===v?void 0:v.settings.foreground,fontWeight:(null===v||void 0===v||null===(t=v.settings.fontStyle)||void 0===t?void 0:t.includes(h.Bold))?"bold":"normal",fontStyle:(null===v||void 0===v||null===(n=v.settings.fontStyle)||void 0===n?void 0:n.includes(h.Italic))?"italic":"normal",textDecoration:(null===v||void 0===v||null===(r=v.settings.fontStyle)||void 0===r?void 0:r.includes(h.Underline))?"underline":"none"},c?{backgroundColor:"".concat(dt(b.settings.foreground),"20")}:{});return a.a.createElement("span",Object.assign({className:je()(pt(g)),style:_},g?{}:{onClick:function(){return i({textmateScopes:o,entity:v,id:l,semanticToken:y})},onMouseEnter:function(){return s({textmateScopes:o,semanticToken:y})}}),u||" ")})),gt=n(72),yt=n.n(gt),ht=Object(w.atom)({key:"selectedSubline",default:""}),_t=Object(w.selector)({key:F("CodeView","Format"),get:function(e){var t=e.get,n=t(q),r=t(ve),a=t(ce),o=t(ye),c=n.code.getLines(),i=Object(le.sortBy)(n.tokens,["line","start"]),s=[];return i.forEach((function(e){var t,n=c[e.line],i=r&&r[e.line]&&r[e.line][e.start],l=o.map((function(e){return Object(Z.a)(Object(Z.a)({},e),Object(f.b)(e.scope))})),u=i&&f.e.matchToken(i[0],l),d=(null===u||void 0===u?void 0:u.fallbackScopes)||e.scopes,m=E(d,a.map((function(e){return{rule:e,scopes:e.scope}}))),p=Object(Z.a)(Object(Z.a)({},e),{},{children:n.substr(e.start,e.length),semanticToken:i,semanticTokenStateId:null===u||void 0===u||null===(t=u.token)||void 0===t?void 0:t.id,ruleStateId:null===m||void 0===m?void 0:m.rule.id});s[e.line]||(s[e.line]=[]),s[e.line].push(p)})),s}}),kt=function(){var e=Object(w.useRecoilValue)(_t),t=Object(w.useRecoilState)(ht),n=Object(u.a)(t,1)[0],r=Object(w.useSetRecoilState)(at),o=Ze(),c=a.a.useCallback((function(e){var t=e.textmateScopes,n=e.semanticToken,a=e.id,c=e.entity;c&&o(c),r({selected:a,textmateScopes:t,semanticToken:n})}),[r,o]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:je()(yt.a.lineNumbers)},e.map((function(e,t){return a.a.createElement("span",{key:t},t+1)}))),a.a.createElement("span",null,e.map((function(e,t){return a.a.createElement(st,{key:t,lineNumber:t},e.map((function(e,r){var o="".concat(t,'-"').concat(e.children,'"-').concat(r);return a.a.createElement(bt,Object.assign({selected:o===n,key:o,id:o,onHover:c,onClick:c},e),e.children||"")})))}))))},jt=n(26),Ot=n.n(jt),St=function(){var e=Object(w.useRecoilValue)(U);return a.a.createElement("div",{className:Ot.a.outer},a.a.createElement("code",{className:Ot.a.container},a.a.createElement("pre",{className:je()(Ot.a.code,Ot.a.codeText)},e?a.a.createElement(Ee,null):a.a.createElement("div",{className:Ot.a.codeWrapper},a.a.createElement(kt,null)))))},Et=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null,"waiting for code")},a.a.createElement(St,null)))},Ct=n(77),xt=n.n(Ct),wt=function(e){var t=e.onClick,n=e.children;return a.a.createElement("li",{onClick:t},n)},Nt=n(73),Rt=n.n(Nt),It=n(75),Tt=n.n(It),At=n(76),Lt=n.n(At),Pt=n(49),Bt=n.n(Pt),Ft=(fe={},Object(Ce.a)(fe,h.Bold,Rt.a),Object(Ce.a)(fe,h.Italic,Tt.a),Object(Ce.a)(fe,h.Underline,Lt.a),fe),Vt=function(e){var t=e.type,n=e.onClick,r=e.enabled,o=Ft[t];return a.a.createElement("div",{onClick:n,className:je()(Bt.a.icon,Object(Ce.a)({},Bt.a.enabled,r))},a.a.createElement(o,null))},Dt=function(e){return"object"===typeof(null===e||void 0===e?void 0:e.colors)&&Array.isArray(e.tokenColors)&&e.tokenColors.every((function(e){return(Array.isArray(e.scope)&&e.scope.every((function(e){return"string"===typeof e}))||"string"===typeof e.scope)&&"object"===typeof e.settings&&("undefined"===typeof e.settings.fontStyle||"string"===typeof e.settings.fontStyle)&&"string"===typeof e.settings.foreground}))},Mt=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o,c,i,l,u,d,f,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reset(W),Q.map((function(e){return t.reset(re(e))})),e.next=4,t.getPromise(se);case 4:n=e.sent,r=n.length,a=0,a=0;case 7:if(!(a<r)){e.next=16;break}return o=n[a],e.next=11,t.getPromise(ie(o));case 11:(c=e.sent)&&(i=Object(Z.a)(Object(Z.a)({},c),{},{__meta:Object(Z.a)(Object(Z.a)({},c.__meta),{},{state:"deleted"})}),t.set(ie(o),i));case 13:a++,e.next=7;break;case 16:return e.next=18,t.getPromise(_e);case 18:l=e.sent,r=l.length,a=0,u=0;case 22:if(!(u<r)){e.next=31;break}return d=n[u],e.next=26,t.getPromise(he(d));case 26:(f=e.sent)&&(m=Object(Z.a)(Object(Z.a)({},f),{},{__meta:Object(Z.a)(Object(Z.a)({},f.__meta),{},{state:"deleted"})}),t.set(he(d),m));case 28:u++,e.next=22;break;case 31:t.set(_e,[]);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gt=function(e){var t=e.target;return new Promise((function(e,n){var r;if(null===t||void 0===t||null===(r=t.files)||void 0===r?void 0:r.length){var a=new FileReader;a.onload=function(t){var n;e(JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result))},a.readAsText(t.files[0])}else n()}))},Ut=function(){var e=a.a.useRef(null),t=Object(w.useRecoilCallback)((function(t){var n=t.snapshot,r=t.gotoSnapshot;return function(){var t=Object(l.a)(s.a.mark((function t(a){var o,c,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Gt(a);case 2:if(o=t.sent,Dt(o)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.getPromise(se);case 7:return c=t.sent,t.next=10,n.asyncMap(function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(t);case 2:n=t.set,Object.keys(o.colors).map((function(e){Y[e]&&n(re(e),{scope:e,settings:{foreground:o.colors[e]}})})),o.tokenColors.forEach((function(e){var t=Object(Z.a)(Object(Z.a)({},e),{},{scope:Array.isArray(e.scope)?e.scope:[e.scope],settings:Object(Z.a)(Object(Z.a)({},e.settings),{},{fontStyle:(e.settings.fontStyle||"").split(" ").map((function(e){return Vt[e]}))})}),r=Qe(t,{existingIds:c});n(ie(r.id),r)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:i=t.sent,e.current.value="",r(i);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{ref:e,type:"file",accept:"application/JSON",onChange:t,style:{display:"none"}}),a.a.createElement(wt,{onClick:function(){var t;null===(t=e.current)||void 0===t||t.click()}},"Open"))},Jt=function(){var e=Object(w.useRecoilState)(U),t=Object(u.a)(e,2),n=t[0],r=t[1];return a.a.createElement(wt,{onClick:function(){r(!n)}},n?"Save preview":"Customize preview")},qt=function(e){return{name:e.name,scope:e.scope,settings:Object(Z.a)(Object(Z.a)({},e.settings.fontStyle.length>0?{fontStyle:e.settings.fontStyle.join(" ")}:{}),{},{foreground:e.settings.foreground})}},zt=function(e){return{name:e.name,colors:(n=e.generalScopes,n.reduce((function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},Object(Ce.a)({},t.id,t.settings.foreground))}),{})),semanticHighlighting:e.semanticTokens.length>0,tokenColors:e.rules.map(qt),type:e.type,semanticTokenColors:(t=e.semanticTokens,t.reduce((function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},Object(Ce.a)({},t.scope,Object(Z.a)({foreground:t.settings.foreground},t.settings.fontStyle.length>0?{fontStyle:t.settings.fontStyle.join(" ")}:{})))}),{}))};var t,n},Wt=function(){var e=Object(w.useRecoilCallback)((function(e){var t=e.snapshot;return Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPromise(ce);case 2:return n=e.sent,e.next=5,t.getPromise(ye);case 5:return r=e.sent,e.next=8,t.getPromise(ne);case 8:return a=e.sent,e.next=11,t.getPromise(W);case 11:o=e.sent,c=zt({rules:n,generalScopes:a,name:"by https://github.com/el-angel/theme-editor",type:o,semanticTokens:r}),i=JSON.stringify(c,null,2),l=document.createElement("a"),u="data:text/json;charset=utf-8,"+encodeURIComponent(i),l.setAttribute("href",u),l.setAttribute("download","theme.json"),l.setAttribute("style","display: none;"),document.body.appendChild(l),l.click(),l.remove();case 22:case"end":return e.stop()}}),e)})))}),[]);return a.a.createElement(wt,{onClick:e},"Export")},Ht=function(){var e=Object(w.useRecoilCallback)((function(e){var t=e.snapshot,n=e.gotoSnapshot;return function(){We().then(Object(l.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.asyncMap(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})))).catch((function(){return null}))}}));return a.a.createElement(wt,{onClick:e},"New")},Qt=n(39),Kt=n.n(Qt),Yt=(me={},Object(Ce.a)(me,H.Active,"active"),Object(Ce.a)(me,H.Inactive,"inactive"),Object(Ce.a)(me,H.Enabled,"enabled"),Object(Ce.a)(me,H.Loading,"loading"),me),Zt=function(){var e=function(){var e=Object(w.useRecoilValue)(pe),t=Object(w.useRecoilCallback)((function(t){var n=t.set;return function(t){e!==H.Loading&&(t===H.Inactive||t!==H.Active&&e!==H.Inactive?n(pe,H.Inactive):(n(pe,H.Loading),de.ping().then((function(){n(pe,H.Active)})).catch((function(){n(pe,H.Enabled)}))))}}));return[e,t]}(),t=Object(u.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){r(H.Active)}),[]),a.a.createElement(wt,{onClick:r},a.a.createElement("div",{className:je()(Kt.a.container,Kt.a[Yt[n]])},a.a.createElement("div",null,"Semantic highlighting"),a.a.createElement("div",{className:Kt.a.status})))},$t=n(22),Xt=n.n($t),en=function(){var e,t=a.a.useState(!1),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(w.useRecoilValue)(re("editor.background")),i=a.a.useRef(null);return Ve(i,(function(e){e&&r&&o(!1)})),a.a.createElement("div",{className:Xt.a.container},a.a.createElement("div",{className:Xt.a.settingsIcon,onClick:function(){return o(!r)}},a.a.createElement(xt.a,{style:{color:dt(null===c||void 0===c||null===(e=c.settings)||void 0===e?void 0:e.foreground),opacity:"0.5"}})),a.a.createElement("div",{ref:i,className:je()(Xt.a.menu,Object(Ce.a)({},Xt.a.open,r))},a.a.createElement("ul",null,a.a.createElement(Ht,null),a.a.createElement(Ut,null),a.a.createElement("li",{className:Xt.a.divider}),a.a.createElement(Zt,null),a.a.createElement(Jt,null),a.a.createElement("li",{className:Xt.a.divider}),a.a.createElement(Wt,null))))},tn=n(78),nn=n.n(tn),rn=n(31),an=n.n(rn),on=function(e){var t=e.onChange,n=e.value,r=a.a.useRef(null),o=a.a.useCallback(Object(le.debounce)((function(e){t(e)}),100),[t]),c=a.a.useCallback((function(e){o(e.target.value)}),[o]);return a.a.createElement("div",{className:an.a.container},a.a.createElement("div",{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.click()},className:an.a.hexValue,style:{backgroundColor:n,color:dt(n)}},n),a.a.createElement("div",{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.click()},className:an.a.picker},a.a.createElement(nn.a,null)),a.a.createElement("input",{className:an.a.input,ref:r,type:"color",value:n,onChange:c}))},cn=n(40),sn=n.n(cn),ln=function(e){var t,n=e.value,r=e.onChange,o=void 0===r?function(){}:r,c=e.readonly,i=a.a.useState(!1),s=Object(u.a)(i,2),l=s[0],d=s[1],f=a.a.useState(n),m=Object(u.a)(f,2),p=m[0],v=m[1],b=a.a.useCallback((function(){c||d(!0)}),[c]),g=a.a.useCallback((function(){c||(d(!1),o(p))}),[o,c,p]),y=a.a.useCallback((function(e){c||"Enter"===e.key&&g()}),[g,c]);return a.a.useEffect((function(){v(n)}),[n]),a.a.createElement("div",null,a.a.createElement("input",{onClick:b,readOnly:!l||c,className:je()(sn.a.name,(t={},Object(Ce.a)(t,sn.a.editable,l&&!c),Object(Ce.a)(t,sn.a.readonly,c),t)),type:"text",value:p,onChange:function(e){return v(e.target.value)},onBlur:g,onKeyDown:y}))},un=n(32),dn=n.n(un),fn=function(e){var t=e.scopes,n=e.onDelete,r=e.existingScopes,o=Object($.a)(t).reverse();return a.a.createElement("div",null,o.map((function(e,t){var o=r.includes(e);return a.a.createElement("div",{className:dn.a.container,key:"".concat(e,"-").concat(t)},o&&a.a.createElement("span",{className:dn.a.warning,role:"img","aria-label":"warning"},"\u2757\ufe0f"),a.a.createElement("div",{className:je()(dn.a.scope,Object(Ce.a)({},dn.a.exists,o)),onClick:function(){return n(e)}},e))})))},mn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ut.a.scale(t).mode("lab").colors(12);return r},pn=function(e){return[mn(ut.a.mix("#ffffff",e,.15).hex(),e,"#000000"),mn(ut.a.mix("red",e,.1).hex(),e,ut.a.mix("cyan",e,.1).hex()),mn(ut.a.mix("green",e,.2).hex(),e,ut.a.mix("magenta",e,.1).hex()),mn(ut.a.mix("blue",e,.2).hex(),e,ut.a.mix("yellow",e,.1).hex())]},vn=n(41),bn=n.n(vn),gn=function(e){var t=e.color,n=e.onColorSelect,r=a.a.useState([]),o=Object(u.a)(r,2),c=o[0],i=o[1];return a.a.useEffect((function(){i(pn(t))}),[t]),a.a.createElement("div",{className:bn.a.container},c.map((function(e,t){return a.a.createElement("div",{className:bn.a.swatchGroup,key:"group-".concat(t)},e.map((function(e,r){return a.a.createElement("div",{key:"".concat(t,"-").concat(r),className:bn.a.swatch,onClick:function(){return n(e)},style:{backgroundColor:e}})})))})))},yn=n(80),hn=n.n(yn),_n=n(79),kn=n.n(_n),jn=function(e){var t=e.children;return a.a.createElement("div",{className:kn.a.item},t)},On=n(33),Sn=n.n(On),En=function(e){var t=e.children,n=e.onClose;return a.a.createElement("div",{className:Sn.a.container},a.a.createElement("div",{className:Sn.a.toolbar},a.a.createElement("div",null,a.a.createElement(jn,null,"Settings")),a.a.createElement("div",null,a.a.createElement("span",{onClick:n,className:Sn.a.close},a.a.createElement(hn.a,{style:{fontSize:"16px"}})))),a.a.createElement("div",{className:Sn.a.content},t))},Cn=n(15),xn=n.n(Cn),wn=function(e){var t=e.onClose,n=e.onChangeName,r=e.onChangeFontStyle,o=e.onChangeColor,c=e.onDelete,i=e.onAddScope,s=e.name,l=e.color,d=e.bold,f=e.italic,m=e.underline,p=e.scopes,v=e.existingScopes,b=e.onDeleteScope,g=a.a.useState(""),y=Object(u.a)(g,2),_=y[0],k=y[1],j=a.a.useCallback((function(e){k(e.target.value)}),[k]),O=a.a.useCallback((function(e){["Enter",","].includes(e.key)&&(e.preventDefault(),i&&i(_),k(""))}),[i,_]);return a.a.createElement(En,{onClose:t},a.a.createElement("div",{className:xn.a.container},a.a.createElement("div",{className:xn.a.top},a.a.createElement("div",{className:xn.a.left},a.a.createElement("div",null,s&&a.a.createElement(ln,{value:s,readonly:!n,onChange:n}),a.a.createElement("div",{className:xn.a.scopesList},!!(p&&v&&b)&&a.a.createElement(fn,{existingScopes:v,scopes:p,onDelete:b}))),c&&a.a.createElement(Ae,{onClick:c},"Delete")),a.a.createElement("div",{className:xn.a.tools},a.a.createElement("div",{className:xn.a.picker},a.a.createElement(on,{value:l,onChange:o})),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Vt,{type:h.Bold,onClick:function(){return r(h.Bold)},enabled:d||!1}),a.a.createElement(Vt,{type:h.Italic,onClick:function(){return r(h.Italic)},enabled:f||!1}),a.a.createElement(Vt,{type:h.Underline,onClick:function(){return r(h.Underline)},enabled:m||!1}))),a.a.createElement("div",{className:xn.a.colorContainer},a.a.createElement(gn,{color:l,onColorSelect:function(e){return o(e)}}))),i&&a.a.createElement("div",{className:xn.a.addScope},a.a.createElement("input",{className:xn.a.addScopeInput,type:"text",placeholder:"Add scope",value:_,onChange:j,onKeyDown:O}))))},Nn=function(){var e=Object(w.useRecoilValue)(Re),t=Ze(),n=Object(w.useRecoilState)(re(null===e||void 0===e?void 0:e.id)),r=Object(u.a)(n,2),o=r[0],c=r[1],i=a.a.useCallback((function(e){c(Object(Z.a)(Object(Z.a)({},o),{},{settings:{foreground:e}}))}),[c,o]);return o?a.a.createElement(wn,{onClose:function(){return t()},onChangeColor:i,color:o.settings.foreground,name:o.id}):null};function Rn(e){return e.__meta.type===k.Rule}function In(e){return e.__meta.type===k.SemanticToken}var Tn=function(){return Object(w.useRecoilCallback)((function(e){var t=e.set,n=e.snapshot;return function(){var e=Object(l.a)(s.a.mark((function e(r){var a,o,c,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"===typeof r?r:r.id,e.next=3,n.getPromise(Re);case 3:return o=e.sent,e.next=6,n.getPromise(we);case 6:if(c=e.sent,Rn(r)&&(i=ie),In(r)&&(i=he),i){e.next=11;break}throw new Error("".concat(r.id," cannot be deleted."));case 11:return e.next=13,n.getPromise(i(r.id));case 13:(l=e.sent)&&(u=Object(Z.a)(Object(Z.a)({},l),{},{__meta:Object(Z.a)(Object(Z.a)({},l.__meta),{},{state:"deleted"})}),t(i(r.id),u)),(null===o||void 0===o?void 0:o.id)===a&&c===o.__meta.type&&t(Re,void 0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[])},An=function(e,t){if(!e.scope.length||!t.length)return[];var n=function(e){for(var t=[],n=0;n<e.length;n++)t=[].concat(Object($.a)(t),Object($.a)(e[n].scope));return t}(t);return n.length?e.scope.reduce((function(e,t){return function(e,t){return t.filter((function(t){return t===e})).length>=2}(t,n)?[].concat(Object($.a)(e),[t]):e}),[]):[]},Ln=function(){var e,t,n,r=Object(w.useRecoilValue)(ce),o=Tn(),c=Ze(),i=Object(w.useRecoilValue)(Re),s=Object(w.useRecoilValue)(ie(null===i||void 0===i?void 0:i.id)),l=Object(w.useSetRecoilState)(ie(null===i||void 0===i?void 0:i.id)),u=a.a.useCallback((function(e){var t=Object($.a)(s.settings.fontStyle)||[];"string"===typeof t&&(t=[t]),t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),l(Object(Z.a)(Object(Z.a)({},s),{},{settings:Object(Z.a)(Object(Z.a)({},s.settings),{},{fontStyle:t})}))}),[l,s]),d=a.a.useCallback((function(e){l(Object(Z.a)(Object(Z.a)({},s),{},{settings:Object(Z.a)(Object(Z.a)({},s.settings),{},{foreground:e})}))}),[l,s]);return(null===s||void 0===s?void 0:s.id)?a.a.createElement(wn,{onClose:function(){return c()},onChangeName:function(e){return l(Object(Z.a)(Object(Z.a)({},s),{},{name:e}))},existingScopes:An(s,r),scopes:s.scope,onDeleteScope:function(e){var t=s.scope.findIndex((function(t){return t===e})),n=Object($.a)(s.scope);n.splice(t,1),l(Object(Z.a)(Object(Z.a)({},s),{},{scope:n}))},onDelete:function(){return o(s)},onChangeColor:d,onChangeFontStyle:function(e){return u(e)},bold:null===(e=s.settings.fontStyle)||void 0===e?void 0:e.includes(h.Bold),italic:null===(t=s.settings.fontStyle)||void 0===t?void 0:t.includes(h.Italic),underline:null===(n=s.settings.fontStyle)||void 0===n?void 0:n.includes(h.Underline),color:s.settings.foreground,onAddScope:function(e){return l(Object(Z.a)(Object(Z.a)({},s),{},{scope:[e].concat(Object($.a)(s.scope))}))},name:s.name}):null},Pn=function(){var e,t,n,r=Object(w.useRecoilValue)(Re),o=Object(w.useRecoilState)(he(null===r||void 0===r?void 0:r.id)),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Ze(),d=Tn(),f=a.a.useCallback((function(e){var t=Object($.a)(i.settings.fontStyle)||[];"string"===typeof t&&(t=[t]),t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),s(Object(Z.a)(Object(Z.a)({},i),{},{settings:Object(Z.a)(Object(Z.a)({},i.settings),{},{fontStyle:t})}))}),[i,s]),m=a.a.useCallback((function(e){s(Object(Z.a)(Object(Z.a)({},i),{},{settings:Object(Z.a)(Object(Z.a)({},i.settings),{},{foreground:e})}))}),[i,s]);return(null===i||void 0===i?void 0:i.id)?a.a.createElement(wn,{onClose:function(){l()},onDelete:function(){return d(i)},onChangeColor:m,onChangeFontStyle:function(e){return f(e)},bold:null===(e=i.settings.fontStyle)||void 0===e?void 0:e.includes(h.Bold),italic:null===(t=i.settings.fontStyle)||void 0===t?void 0:t.includes(h.Italic),underline:null===(n=i.settings.fontStyle)||void 0===n?void 0:n.includes(h.Underline),color:i.settings.foreground,name:i.scope}):null},Bn=function(){var e=Object(w.useRecoilValue)(we);return Object(w.useRecoilValue)(Re)?e===k.GeneralScope?a.a.createElement(Nn,null):e===k.Rule?a.a.createElement(Ln,null):a.a.createElement(Pn,null):null},Fn=n(81),Vn=n.n(Fn),Dn=Object(w.atom)({key:B("Sidebar","FilterAdd"),default:""}),Mn=Object(w.selector)({key:F("Sidebar","FilteredRules"),get:function(e){var t=e.get,n=t(Dn).toLowerCase();return t(ce).filter((function(e){return-1!==e.name.toLowerCase().indexOf(n)||e.scope.some((function(e){return-1!==e.toLowerCase().indexOf(n)}))}))}}),Gn=Object(w.selector)({key:F("Sidebar","FilteredGeneralScope"),get:function(e){var t=e.get,n=t(Dn).toLowerCase();return Q.map((function(e){return t(re(e))})).filter((function(e){return-1!==e.id.toLowerCase().indexOf(n)}))}}),Un=Object(w.selector)({key:F("Sidebar","FilteredSemanticTokens"),get:function(e){var t=e.get,n=t(Dn).toLowerCase();return t(ye).filter((function(e){return-1!==e.scope.toLowerCase().indexOf(n)}))}}),Jn=n(42),qn=n.n(Jn),zn=function(){var e=Object(w.useRecoilState)(Dn),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(w.useRecoilValue)(we),c=Ye();return a.a.createElement("div",{className:qn.a.container},a.a.createElement("input",{className:qn.a.input,type:"text",value:n,onChange:function(e){return r(e.target.value)},placeholder:"filter/add"}),o!==k.GeneralScope&&a.a.createElement(Ae,{className:qn.a.addButton,onClick:function(){return c((e=n,{input:{scope:(t=o)===k.Rule?[e]:e},type:t}));var e,t}},a.a.createElement(Vn.a,null)))},Wn=n(23),Hn=n.n(Wn),Qn=function(e){var t=e.isActive,n=e.onClick,r=void 0===n?function(){}:n,o=e.title,c=e.color,i=e.showWarning,s=void 0!==i&&i;return a.a.createElement("div",{className:je()(Hn.a.container,Object(Ce.a)({},Hn.a.active,t)),onClick:r},a.a.createElement("div",{className:Hn.a.nameContainer},s&&a.a.createElement("span",{className:Hn.a.warning},"\u2757\ufe0f"),a.a.createElement("div",{className:Hn.a.name},o)),a.a.createElement("div",{className:Hn.a.color,style:{backgroundColor:c}}))},Kn=function(e){var t=e.id,n=e.settings,r=Ze(),o=Object(w.useRecoilValue)(Re),c=t===(null===o||void 0===o?void 0:o.id);return e.id?a.a.createElement(a.a.Fragment,null,a.a.createElement(Qn,{isActive:c,onClick:function(){return r(e)},title:t,color:n.foreground})):null},Yn=function(){var e=Object(w.useRecoilValue)(Gn);return a.a.createElement(a.a.Fragment,null,e.map((function(e){return a.a.createElement(Kn,Object.assign({},e,{key:e.id}))})))},Zn=function(e){var t=e.id,n=e.name,r=e.settings,o=Ze(),c=Object(w.useRecoilValue)(ce),i=Object(w.useRecoilValue)(Re),s=An(e,c),l=(null===i||void 0===i?void 0:i.id)===t;return a.a.createElement(Qn,{isActive:l,onClick:function(){l||o(e)},title:n,color:r.foreground,showWarning:!!s.length})},$n=function(){var e=Object(w.useRecoilValue)(Mn);return a.a.createElement(a.a.Fragment,null,e.map((function(e){return a.a.createElement(Zn,Object.assign({key:e.id},e))})))},Xn=function(e){var t=e.id,n=e.settings,r=e.scope,o=Ze(),c=Object(w.useRecoilValue)(Re),i=(null===c||void 0===c?void 0:c.id)===t&&c.__meta.type===k.SemanticToken;return a.a.createElement(Qn,{isActive:i,onClick:function(){i||o(e)},title:r,color:n.foreground})},er=function(){var e=Object(w.useRecoilValue)(Un);return a.a.createElement(a.a.Fragment,null,e.map((function(e){return a.a.createElement(Xn,Object.assign({key:e.id},e))})))},tr=n(16),nr=n.n(tr),rr=function(){var e=Object(w.useRecoilState)(we),t=Object(u.a)(e,2),n=t[0],r=t[1];return a.a.createElement("div",{className:nr.a.toolbar},a.a.createElement("div",{className:nr.a.header},a.a.createElement("div",{className:je()(nr.a.item,Object(Ce.a)({},nr.a.isActive,n===k.Rule)),onClick:function(){return r(k.Rule)}},a.a.createElement("span",null,"Rules")),a.a.createElement("div",{className:je()(nr.a.item,Object(Ce.a)({},nr.a.isActive,n===k.SemanticToken)),onClick:function(){return r(k.SemanticToken)}},a.a.createElement("span",null,"Semantic")),a.a.createElement("div",{className:je()(nr.a.item,Object(Ce.a)({},nr.a.isActive,n===k.GeneralScope)),onClick:function(){return r(k.GeneralScope)}},a.a.createElement("span",null,"General"))))},ar=n(50),or=n.n(ar),cr=Object(w.selector)({key:F("GeneralScopes","CSS"),get:function(e){var t=e.get,n=Q.reduce((function(e,n){var r=t(re(n)),a=r.id,o=r.settings.foreground,c="--".concat(a.replace(/\./,"-"));return"\n        ".concat(e,"\n        ").concat(c,": ").concat(o,";\n      ").trim()}),"");return"\n      :root {\n        ".concat(n,"\n      }\n    ")}}),ir=function(){var e=Object(w.useRecoilValue)(we),t=Object(w.useRecoilValue)(cr);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(rr,null)),a.a.createElement(zn,null),a.a.createElement("div",{className:or.a.content},a.a.createElement("style",{type:"text/css"},t),a.a.createElement("div",{className:or.a.rules},e===k.Rule&&a.a.createElement($n,null),e===k.GeneralScope&&a.a.createElement(Yn,null),e===k.SemanticToken&&a.a.createElement(er,null)),a.a.createElement(ot,null)))},sr=Object(w.atom)({key:B("Modal","Ids"),default:[]}),lr=Object(w.atomFamily)({key:B("ModalState","Family"),default:!1}),ur=Object(w.selectorFamily)({key:F("ModalState","GetFamily"),get:function(e){return function(t){return(0,t.get)(lr(e))}},set:function(e){return function(t,n){var r=t.set,a=(0,t.get)(sr);a.includes(e)||r(sr,[].concat(Object($.a)(a),[e])),n&&a.forEach((function(t){t!==e&&r(lr(t),!1)})),r(lr(e),n)}}}),dr=n(82),fr=n.n(dr),mr=function(e){var t=e.children,n=e.onClick;return a.a.createElement("div",{onClick:n,className:fr.a.item},t)},pr=n(24),vr=n.n(pr),br=function(e){var t=e.value,n=e.options,r=e.onSelect,o=e.onClose,c=e.inputProps,i=n.findIndex((function(e){return e.value===t})),s=a.a.useState(i),l=Object(u.a)(s,2),d=l[0],f=l[1],m=a.a.useCallback((function(e){if(["Enter","ArrowUp","ArrowDown","Escape"].includes(e.key))return e.preventDefault(),"Escape"==e.key&&o(),"Enter"===e.key&&r(n[d]),"ArrowUp"===e.key?0===d?void f(n.length-1):void f(d-1):"ArrowDown"===e.key?d===n.length-1?void f(0):void f(d+1):void 0}),[d,o,r,n]);return a.a.useEffect((function(){return window.addEventListener("keydown",m),function(){window.removeEventListener("keydown",m)}}),[d,m]),a.a.createElement("div",{className:vr.a.container},a.a.createElement("div",{className:vr.a.inputContainer},a.a.createElement("input",Object.assign({},c,{className:vr.a.input}))),a.a.createElement("div",{className:vr.a.optionContainer},n.map((function(e,t){return a.a.createElement("div",{onClick:function(){return r(e)},className:je()(vr.a.option,Object(Ce.a)({},vr.a.focussed,d===t)),key:e.value},e.label)}))))},gr=Object.keys(T).map((function(e){return{value:e,label:T[e]}})),yr=function(){var e=Object(w.useRecoilState)(ur("language")),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(w.useRecoilState)(D),c=Object(u.a)(o,2),i=c[0],s=c[1];if(!n)return null;return a.a.createElement(Ue,{closeOnOutsideClick:!0,onClose:function(){return r(!1)}},a.a.createElement(br,{value:i,options:gr,onSelect:function(e){s(e.value),r(!1)},onClose:function(){return r(!1)},inputProps:{placeholder:"Select language mode",readOnly:!0}}))},hr=[{label:"Dark",value:"dark"},{label:"Light",value:"light"}],_r=function(){var e=Object(w.useRecoilState)(ur("themeStyle")),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(w.useRecoilState)(W),c=Object(u.a)(o,2),i=c[0],s=c[1];if(!n)return null;return a.a.createElement(Ue,{closeOnOutsideClick:!0,onClose:function(){return r(!1)}},a.a.createElement(br,{value:i,options:hr,onSelect:function(e){s(e.value),r(!1)},onClose:function(){return r(!1)},inputProps:{placeholder:"Select theme style",readOnly:!0}}))},kr=n(51),jr=n.n(kr),Or=function(){var e=Object(w.useRecoilState)(ur("language")),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(w.useRecoilState)(ur("themeStyle")),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(w.useRecoilValue)(D),d=Object(w.useRecoilState)(W),f=Object(u.a)(d,1)[0];return a.a.createElement(a.a.Fragment,null,a.a.createElement(yr,null),a.a.createElement(_r,null),a.a.createElement("div",{className:jr.a.container},a.a.createElement("div",{className:"left"},"main*"),a.a.createElement("div",{className:"right"},a.a.createElement(mr,{onClick:function(){return s(!i)}},"Style: ".concat(f)),a.a.createElement(mr,{onClick:function(){return r(!n)}},T[l]),a.a.createElement(mr,null,a.a.createElement("a",{className:jr.a.c_est_moi,href:"http://github.com/el-angel",target:"_blank",rel:"noopener noreferrer"},"el angel @ github")))))},Sr=n(20),Er=n.n(Sr),Cr="".concat("/theme-editor","/onigasm.wasm"),xr=function(e){var t=e.set,n=I.keys(),r=I.get(B(oe,"Ids"))||[];t(se,r);var a=I.get(B(ge,"Ids"))||[];t(_e,a);var o,c=Object(d.a)(n);try{for(c.s();!(o=c.n()).done;){var i=o.value;if(i.includes(B(oe,"id__"))){var s=I.get(i);r.includes(s.id)&&t(ie(s.id),s)}else if(i.includes(B(ge,"id__"))){var l=I.get(i);a.includes(l.id)&&t(he(l.id),l)}else if(i.includes(B(te,"id__"))){var u=I.get(i);t(re(u.id),u)}else if(i.includes(B("Code","Raw"))){var f=I.get(i);t(G,f)}else if(i.includes(B("Theme","Style"))){var m=I.get(i);t(W,m)}else;}}catch(p){c.e(p)}finally{c.f()}},wr=function(){var e=a.a.useState(!1),t=Object(u.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=document.querySelector("body");e&&e.setAttribute("style","overflow: hidden"),Object(f.d)(f.a.vscode),n||Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(Cr);case 2:r(!0);case 3:case"end":return e.stop()}}),e)})))()}),[n]),n?a.a.createElement(w.RecoilRoot,{initializeState:xr},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Er.a.container},a.a.createElement("div",{className:Er.a.sidebar},a.a.createElement(ir,null)),a.a.createElement("div",{className:Er.a.main},a.a.createElement("div",{className:Er.a.settings},a.a.createElement(en,null)),a.a.createElement("div",{className:Er.a.code},a.a.createElement(Et,null)),a.a.createElement("div",{className:Er.a.bottom},a.a.createElement(Bn,null))),a.a.createElement("div",{className:Er.a.statusbar},a.a.createElement(Or,null))))):a.a.createElement("div",null,"starting up...")};n(138);c.a.render(a.a.createElement(r.Profiler,{id:"Application",onRender:function(){}},a.a.createElement(a.a.StrictMode,null,a.a.createElement(wr,null))),document.getElementById("root"))}],[[85,1,2]]]);
//# sourceMappingURL=main.b3a0874e.chunk.js.map