(this["webpackJsonp@anche/tmtheme-client"]=this["webpackJsonp@anche/tmtheme-client"]||[]).push([[0],{11:function(e,t,n){e.exports={container:"src-containers-Settings-RuleSettings-styles-module__container--2r2dM",colorContainer:"src-containers-Settings-RuleSettings-styles-module__colorContainer--1FvYs",top:"src-containers-Settings-RuleSettings-styles-module__top--2A3DI",left:"src-containers-Settings-RuleSettings-styles-module__left--3S2TL",tools:"src-containers-Settings-RuleSettings-styles-module__tools--ZMjTI",picker:"src-containers-Settings-RuleSettings-styles-module__picker--VmP30",delete:"src-containers-Settings-RuleSettings-styles-module__delete--23Kh5",scopesList:"src-containers-Settings-RuleSettings-styles-module__scopesList--RxJbG",addScope:"src-containers-Settings-RuleSettings-styles-module__addScope--7ZgO8",addScopeInput:"src-containers-Settings-RuleSettings-styles-module__addScopeInput--3Hclo"}},114:function(e){e.exports=JSON.parse('{"name":"@anche/tmtheme-client","version":"0.1.0","repository":{"type":"git","url":"https://github.com/el-angel/tmtheme-editor.git"},"homepage":"https://el-angel.github.io/textmate-editor","dependencies":{"@anche/textmate-grammar-parser":"^0.0.0","@material-ui/core":"^4.11.0","@material-ui/icons":"^4.9.1","body-parser":"^1.19.0","camelcase":"^5.3.1","case-sensitive-paths-webpack-plugin":"2.3.0","chroma-js":"^2.1.0","classnames":"^2.2.6","lodash":"^4.17.15","react":"^16.13.1","react-app-polyfill":"^1.0.6","react-color":"^2.18.1","react-dev-utils":"^10.2.1","react-dom":"^16.13.1","recoil":"^0.0.10","resolve":"1.15.0","semver":"6.3.0"},"devDependencies":{"@babel/core":"7.9.0","@svgr/webpack":"4.3.3","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/chroma-js":"^2.0.0","@types/classnames":"^2.2.10","@types/jest":"^24.0.0","@types/lodash":"^4.14.155","@types/node":"^12.0.0","@types/oniguruma":"^7.0.1","@types/react":"^16.9.0","@types/react-color":"^3.0.2","@types/react-dom":"^16.9.0","@types/scheduler":"^0.16.1","babel-jest":"^24.9.0","babel-loader":"8.1.0","babel-plugin-named-asset-import":"^0.3.6","babel-preset-react-app":"^9.1.2","css-loader":"3.4.2","dotenv":"8.2.0","dotenv-expand":"5.1.0","eslint-loader":"3.0.3","express":"^4.17.1","file-loader":"4.3.0","fs-extra":"^8.1.0","gh-pages":"^3.0.0","html-webpack-plugin":"4.0.0-beta.11","identity-obj-proxy":"3.0.0","jest":"26","jest-environment-jsdom-fourteen":"1.0.1","jest-resolve":"24.9.0","jest-watch-typeahead":"0.4.2","mini-css-extract-plugin":"0.9.0","node-sass":"^4.14.1","optimize-css-assets-webpack-plugin":"5.0.3","pnp-webpack-plugin":"1.6.4","postcss-flexbugs-fixes":"4.1.0","postcss-loader":"3.0.0","postcss-normalize":"8.0.1","postcss-preset-env":"6.7.0","postcss-safe-parser":"4.0.1","resolve-url-loader":"3.1.1","rimraf":"^3.0.2","sass-loader":"8.0.2","scheduler":"^0.19.1","serve":"^11.3.2","style-loader":"0.23.1","terser-webpack-plugin":"2.3.5","ts-jest":"^26.1.0","ts-node-dev":"^1.0.0-pre.44","ts-pnp":"1.1.6","url-loader":"2.3.0","wasm-loader":"^1.3.0","wast-loader":"^1.9.0","webpack":"4.42.0","webpack-dev-server":"3.10.3","webpack-manifest-plugin":"2.2.0","workbox-webpack-plugin":"4.3.1"},"scripts":{"start":"node ./scripts/start.js","start:prod":"yarn build && serve -s build","build":"node ./scripts/build.js","deploy":"gh-pages -d build","lint":"eslint src --ext .ts,.tsx .","precommit":"tsc --noEmit && lint-staged","predeploy":"yarn build","test":"jest","typecheck":"yarn tsc --noEmit"},"lint-staged":{"src/**/*.{ts,tsx}":["pretty-quick --staged","eslint --fix"],"src/**/*.scss":["stylelint --syntax=scss","pretty-quick --staged"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"jest":{"roots":["<rootDir>/src"],"collectCoverageFrom":["src/**/*.{js,jsx,ts,tsx}","!src/**/*.d.ts"],"setupFiles":["react-app-polyfill/jsdom"],"setupFilesAfterEnv":["<rootDir>/src/setupTests.ts"],"testMatch":["<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}","<rootDir>/src/**/*.{spec,test}.{js,jsx,ts,tsx}"],"testEnvironment":"jest-environment-jsdom-fourteen","transform":{"^.+\\\\.(js|jsx|ts|tsx)$":"<rootDir>/node_modules/babel-jest","^.+\\\\.css$":"<rootDir>/config/jest/cssTransform.js","^(?!.*\\\\.(js|jsx|ts|tsx|css|json)$)":"<rootDir>/config/jest/fileTransform.js"},"transformIgnorePatterns":["[/\\\\\\\\]node_modules[/\\\\\\\\].+\\\\.(js|jsx|ts|tsx)$","^.+\\\\.module\\\\.(css|sass|scss)$"],"modulePaths":[],"moduleNameMapper":{"^react-native$":"react-native-web","^.+\\\\.module\\\\.(css|sass|scss)$":"identity-obj-proxy","^~/(.*)$":"<rootDir>/src/$1"},"moduleFileExtensions":["web.js","js","web.ts","ts","web.tsx","tsx","json","web.jsx","jsx","node"],"watchPlugins":["jest-watch-typeahead/filename","jest-watch-typeahead/testname"]},"babel":{"presets":["react-app"]}}')},122:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(12),s=n.n(c),l=n(4),i=n.n(l),u=n(8),d=n(3),m=n(30),f=n(31),p=n(61),b=n(40),v=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function c(e){try{l(a.next(e))}catch(t){r(t)}}function s(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}l((a=a.apply(e,t||[])).next())}))},g=function(e){return v(void 0,void 0,void 0,i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.arrayBuffer();case 5:return a=t.sent,t.next=8,Object(b.loadWASM)(a);case 8:case"end":return t.stop()}}),t)})))},y=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function c(e){try{l(a.next(e))}catch(t){r(t)}}function s(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}l((a=a.apply(e,t||[])).next())}))},j=function(){function e(t){var n=this;Object(m.a)(this,e),this._getGrammarDefinition=function(e){return y(n,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getLanguage(e);case 2:return n=t.sent,t.abrupt("return",{format:"json",content:n});case 4:case"end":return t.stop()}}),t,this)})))},this._typeCheck=function(e){return!!Object.keys(n._filePaths).includes(e)},this._filePaths=t.filePaths,this._registry=new p.Registry({getGrammarDefinition:this._getGrammarDefinition})}return Object(f.a)(e,[{key:"_getLanguage",value:function(e){return y(this,void 0,void 0,i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this._filePaths[e]);case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Something failed when doing a request to fetch the grammar file.");case 5:return t.next=7,n.text();case 7:return a=t.sent,t.abrupt("return",JSON.parse(a));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"loadGrammar",value:function(e){return y(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._typeCheck(e)){t.next=2;break}throw new Error('"'.concat(e,'" grammar is not supported. Please add scopename and path to Options.filePaths.'));case 2:return t.next=4,this._registry.loadGrammar(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"parse",value:function(e,t){return y(this,void 0,void 0,i.a.mark((function n(){var a,o,r,c,s,l,u,d,m,f;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadGrammar(t);case 2:for(a=n.sent,o=e.split("\n"),r={scopeName:t,lines:[]},s=0;s<o.length;s++){for(l=o[s],u=a.tokenizeLine(l,c),d={number:s,content:[]},m=function(e){var t=u.tokens[e],n={content:l.substring(t.startIndex,t.endIndex),scopes:t.scopes.filter((function(e,n){return t.scopes.indexOf(e)===n}))};d.content.push(n)},f=0;f<u.tokens.length;f++)m(f);r.lines.push(d),c=u.ruleStack}return n.abrupt("return",r);case 7:case"end":return n.stop()}}),n,this)})))}}]),e}(),_=n(1),k=(n(114).default,{"source.ts":"TypeScript","source.tsx":"TypeScript React","source.js":"JavaScript","source.jsx":"JavaScript React","source.css":"CSS","text.html.basic":"HTML","source.json":"JSON"}),h=function(e){return"".concat("/textmate-editor","/grammar/").concat(e)},O=new j({filePaths:{"source.ts":h("typescript.json"),"source.tsx":h("typescriptreact.json"),"source.js":h("javascript.json"),"source.jsx":h("javascriptreact.json"),"source.css":h("css.json"),"text.html.basic":h("html.json"),"source.json":h("json.json")}}),S=O,E=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,[{key:"get",value:function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"keys",value:function(){return Object.keys(localStorage)}}]),e}(),C=new E,x=C,w=function(e,t){return"".concat(e.toUpperCase(),"/").concat(t)},N=function(e){return w("atom",e)},R=function(e){return w("selector",e)},I=Object(_.atom)({key:N("Language"),default:"source.tsx"}),A=(Object(_.selector)({key:R("ReadibleLanguage"),get:function(e){var t=(0,e.get)(I);return k[t]}}),I),F=Object(_.atom)({key:N("RawCode"),default:"\nimport React from 'react';\nimport main from '~/state/main';\nimport { getAll } from '~/helpers/getAll';\nimport Button from '../../component/Button';\n\nimport './style.css';\n\ninterface Props {\n  title: string;\n  content: string;\n  onClick: (...args: any[]) => void,\n}\n\nconst Viewer: React.FC<Props>  = ({ title, content, onClick }) => {\n  return (\n    <div>\n      <h1>{title}</h1>\n\n      <p>{content}</p>\n\n      <button\n        type=\"button\"\n        onClick={onClick}\n        className=\"button\"\n        >\n          Well, what are you waiting for?\n        </button>\n    </div>\n  );\n}\n\nexport default Viewer;\n"}),B=Object(_.selector)({key:R("RawCode__Selector"),get:function(e){return(0,e.get)(F)},set:function(e,t){var n=e.set,a=e.get;n(F,t),x.set(N("RawCode"),a(F))}}),V=Object(_.atom)({key:N("EditCode"),default:!1}),G=Object(_.selector)({key:R("Code"),get:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(F),o=n(A),e.next=5,S.parse(a,o);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),P=(Object(_.atom)({key:N("SelectedSubline"),default:""}),G),D=n(2),L=Object(_.atom)({key:N("Theme"),default:"dark"}),M=Object(_.selector)({key:R("Theme"),get:function(e){return(0,e.get)(L)},set:function(e,t){var n=e.set,a=t;t instanceof _.DefaultValue&&(a="dark"),x.set(N("Theme"),a),n(L,a)}}),T="bold",q="italic",J="underline",Q=["button.background","button.foreground","button.hoverBackground","editor.background","editor.foreground","editor.selectionBackground","editor.selectionForeground","editorGutter.background","editorLineNumber.foreground","focusBorder","foreground","input.background","input.border","input.foreground","input.placeholderForeground","list.focusBackground","list.focusForeground","list.hoverBackground","list.hoverForeground","panel.background","panel.border","quickInput.background","quickInput.foreground","sideBar.background","sideBar.border","sideBar.foreground","statusBar.background","statusBar.border","statusBar.foreground","statusBarItem.activeBackground","statusBarItem.hoverBackground"],H=function(e,t){return{light:e,dark:t}},U={"button.background":H("#e36d6d","#e36d6d"),"button.foreground":H("#333333","#333333"),"button.hoverBackground":H("#b74e4e","#b74e4e"),"editor.background":H("#ffffff","#1c1c1c"),"editor.foreground":H("#333333","#ffffff"),"editor.selectionBackground":H("#f2d0a1","#efafaf"),"editor.selectionForeground":H("#333333","#ffffff"),"editorGutter.background":H("ffffff","#1c1c1c"),"editorLineNumber.foreground":H("#cccccc","#585858"),focusBorder:H("#e8e8e8","#171717"),foreground:H("#333333","#eeeeee"),"input.background":H("#ffffff","#2c2c2b"),"input.border":H("#d9d9d9","#141414"),"input.foreground":H("#333333","#ffffff"),"input.placeholderForeground":H("#999999","#737373"),"list.focusBackground":H("#d1d1d1","#525252"),"list.focusForeground":H("#333333","#cfcfcf"),"list.hoverBackground":H("#5c5c5c","#525252"),"list.hoverForeground":H("#333333","#eeeeee"),"panel.background":H("#ffffff","#2a2828"),"panel.border":H("#d9d9d9","#141414"),"quickInput.background":H("#f5f5f5","#242424"),"quickInput.foreground":H("#545454","#ffffff"),"sideBar.background":H("#ffffff","#111111"),"sideBar.border":H("#d9d9d9","#121212"),"sideBar.foreground":H("#333333","#f9f9f9"),"statusBar.background":H("#242424","#1a1a1a"),"statusBar.border":H("#878787","#000000"),"statusBar.foreground":H("#ffffff","#eeeeee"),"statusBarItem.activeBackground":H("#777777","#333333"),"statusBarItem.hoverBackground":H("#313131","#666666")},W=U,z=function(e,t){return{scope:e,color:W[e][t]}},K=Object(_.atomFamily)({key:N("GeneralScopesFamily"),default:Object(_.selectorFamily)({key:R("GeneralScopesFamily/Default"),get:function(e){return function(t){var n=(0,t.get)(M);return z(e,n)}}})}),$=Object(_.selectorFamily)({key:R("GeneralScopeManager"),get:function(e){return function(t){var n=t.get;if(e)return n(K(e))}},set:function(e){return function(t,n){var a=t.get,o=t.set;if(e){if(n instanceof _.DefaultValue){var r=a(M);return o(K(e),Object(D.a)({},z(e,r))),void x.remove(N('GeneralScopesFamily__"'.concat(e,'"')))}o(K(e),Object(D.a)(Object(D.a)({},n),{},{__meta:{touched:!0}}));var c=a(K(e));x.set(N('GeneralScopesFamily__"'.concat(c.scope,'"')),c)}}}}),Y=Object(_.selector)({key:R("AllScopes"),get:function(e){var t=e.get;return Q.map((function(e){return t($(e))}))}}),Z=$,X=n(7),ee=Object(_.atom)({key:N("RulesIds"),default:[],persistence_UNSTABLE:!0}),te=Object(_.selector)({key:R("RulesIds"),get:function(e){return(0,e.get)(ee)}}),ne=Object(_.selector)({key:R("RulesIds_SET"),get:function(e){return(0,e.get)(te)},set:function(e,t){(0,e.set)(ee,t||[]),x.set(N("RulesIds"),t||[])}}),ae=Object(_.atomFamily)({key:N("Rules"),default:{id:"",name:"",scope:[],settings:{foreground:"#000000",fontStyle:[]},__meta:{}}}),oe=Object(_.selector)({key:R("AllRules"),get:function(e){var t=e.get;return t(ee).map((function(e){return t(ae(e))}))}}),re=Object(_.selectorFamily)({key:R("RuleManager"),get:function(e){return function(t){var n=t.get;if(e)return n(ae(e))}},set:function(e){return function(t,n){var a,o,r=t.set,c=t.get;if(e){var s=ae(e),l=c(ee);if(l.includes(e)||r(ne,[].concat(Object(X.a)(l),[e])),"deleted"===(null===(a=n)||void 0===a||null===(o=a.__meta)||void 0===o?void 0:o.state))return r(ne,l.filter((function(t){return t!==e}))),void x.remove(N('Rules__"'.concat(e,'"')));r(s,Object(D.a)(Object(D.a)({},n),{},{id:e,__meta:{touched:!0}})),x.set(N('Rules__"'.concat(e,'"')),c(s))}}}}),ce=re,se=n(5),le=n.n(se),ie=n(41),ue=n.n(ie),de=function(){var e=Object(_.useRecoilState)(B),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(V),c=Object(d.a)(o,1)[0],s=r.a.useRef(null);return r.a.useEffect((function(){var e;s&&(null===(e=s.current)||void 0===e||e.select())}),[c]),r.a.createElement("textarea",{ref:s,spellCheck:!1,className:le()(ue.a.textArea,ue.a.codeText),onChange:function(e){return a(e.target.value)},value:n})},me=n(6),fe=Object(_.atom)({key:N("EditRuleID"),default:""}),pe=fe,be=n(15),ve=function(e){return e?e.name?e.name:"string"===typeof e.scope?e.scope:"object"===typeof e.scope&&e.scope.length?e.scope[0]:"":""},ge=function(e){var t,n;return{id:e.id,name:ve(e),scope:(null===e||void 0===e?void 0:e.scope)||[],settings:{foreground:(null===e||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.foreground)||"#a0988a",fontStyle:(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.fontStyle)||[]}}},ye=function(){return Object(_.useRecoilCallback)((function(e){var t=e.set,n=e.snapshot;return function(){var e=Object(u.a)(i.a.mark((function e(a){var o,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=((null===a||void 0===a?void 0:a.scope)||[]).map((function(e){var t=e.split(".");return t.pop(),t.join(".")})),e.next=3,n.getPromise(te);case 3:for(r=e.sent,c=Object(be.uniqueId)();r.includes(c);)c=Object(be.uniqueId)();s=ge(Object(D.a)(Object(D.a)({},a),{},{id:c,scope:o})),t(ce(c),s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[])},je=function(e,t){var n=null;return e.forEach((function(e){var a=function(e,t){var n=Object(X.a)(t),a=e.split(/ /g),o=[],r=0;return a.every((function(e){return Object(X.a)(n).some((function(t){var a=function(e,t){if(e===t)return!0;var n=e+".";return n===t.substr(0,n.length)}(e,t);return n.splice(0,1),a&&o.push(r),r++,a}))}))?{query:e,scope:a.pop(),parents:a,matchIndexes:o}:null}(e,t);if(a)if(n){var o=n.matchIndexes[n.matchIndexes.length-1],r=a.matchIndexes[a.matchIndexes.length-1];(r>o||o===r&&function(e,t){if(e.scope!==t.scope)return e.scope.length-t.scope.length;if(e.parents.length!==t.parents.length)return e.parents.length-t.parents.length;for(var n=0;n<e.parents.length;n++)if(e.parents[n]!==t.parents[n])return e.parents[n].length-t.parents[n].length;return 0}(a,n)>0)&&(n=a)}else n=a})),n},_e=function(e,t){var n=e.reduce((function(e,t){return[].concat(Object(X.a)(e),Object(X.a)(t.scope))}),[]),a=je(n,t),o=null;return e.some((function(e){return!(!(null===a||void 0===a?void 0:a.query)||!e.scope.includes(a.query))&&(o=e,!0)})),o?{rule:o,query:a.query}:null},ke=n(32),he=n.n(ke),Oe=Object(_.atom)({key:N("EditGeneralScopeID"),default:void 0}),Se=Object(_.atom)({key:N("Mode"),default:"rules"}),Ee=Object(_.selector)({key:R("Mode"),get:function(e){return(0,e.get)(Se)},set:function(e,t){var n=e.set;n(pe,""),n(Oe,""),n(Se,t)}}),Ce=Object(_.atom)({key:N("ActiveScope"),default:""}),xe=Object(_.selector)({key:R("ActivateRuleByScope"),get:function(e){return(0,e.get)(Ce)},set:function(e,t){var n=e.get,a=e.set,o=t;a(Ce,o);var r=n(oe),c=_e(r,[o]);c&&(a(Ee,"rules"),a(pe,c.rule.id))}}),we=Object(_.atom)({key:"scopesInfoState",default:[]}),Ne=Object(_.selector)({key:"scopesInfoSelector",get:function(e){return(0,e.get)(we)},set:function(e,t){var n=e.set;(0,e.get)(Qe)||n(we,t)}}),Re=function(){var e=Object(_.useRecoilValue)(oe),t=Object(_.useRecoilValue)(Ne),n=Object(_.useSetRecoilState)(xe),a=Object(_.useRecoilValue)(pe),o=Object(_.useRecoilState)(ce(a)),c=Object(d.a)(o,2),s=c[0],l=c[1],i=ye();return t.length?r.a.createElement("code",{className:he.a.info},Object(X.a)(t).reverse().map((function(t,a){var o=!!_e(e,[t]);return r.a.createElement("span",{className:le()(he.a.scope,Object(me.a)({},he.a.exists,o)),onClick:function(){return function(t){if(_e(e,[t]))n(t);else if(s){var a=new RegExp("^".concat(t));if(s.scope.some((function(e){return a.test(e)})))return;var o=t.split(".");o.pop();var r=o.join(".");l(Object(D.a)(Object(D.a)({},s),{},{scope:[r].concat(Object(X.a)(s.scope))}))}else i({scope:[t]})}(t)},key:"".concat(t,"-").concat(a)},t)}))):null},Ie=n(62),Ae=n.n(Ie),Fe=r.a.memo((function(e){var t=e.lineNumber,n=e.children;return r.a.createElement("span",{className:"".concat(Ae.a.line," line-").concat(t)},n)})),Be=n(9),Ve=n.n(Be),Ge=function(e){return Ve.a.contrast(e||"white","black")>4.5?"#000000":"#ffffff"},Pe=n(42),De=n.n(Pe),Le=function(e,t){var n=(e||"").split(".");return le.a.apply(void 0,Object(X.a)(n).concat([De.a.subline,Object(me.a)({},De.a.empty,t)]))},Me=r.a.memo((function(e){var t=e.rules,n=e.scopes,a=e.content,o=e.selected,c=e.onClick,s=e.onHover,l=e.id,i=r.a.useState(""),u=Object(d.a)(i,2),m=u[0],f=u[1],p=r.a.useState(null),b=Object(d.a)(p,2),v=b[0],g=b[1];r.a.useEffect((function(){var e=_e(t,n);g((null===e||void 0===e?void 0:e.rule)||null),f((null===e||void 0===e?void 0:e.query)||"")}),[n,t]);var y=Object(_.useRecoilValue)(Z("editor.background")),j=!a.trim();return r.a.createElement("span",Object.assign({className:le()(Le(m,j)),style:o?{backgroundColor:"".concat(Ge(y.color),"20")}:{}},j?{}:{onClick:function(){return c(n,v,l,o)},onMouseEnter:function(){return s(n)}}),a||" ")})),Te=function(){var e=Object(_.useRecoilValue)(te);return Object(_.useRecoilCallback)((function(t){var n=t.set;return function(t){var a="string"===typeof t?t:null===t||void 0===t?void 0:t.id;a&&e.includes(a)?n(pe,a):n(pe,"")}}),[e])},qe=n(63),Je=n.n(qe),Qe=Object(_.atom)({key:"selectedSubline",default:""}),He=function(){var e=Object(_.useRecoilValue)(oe),t=Object(_.useRecoilValue)(P),n=Object(_.useRecoilState)(Qe),a=Object(d.a)(n,2),o=a[0],c=a[1],s=Object(_.useSetRecoilState)(Ne),l=Te(),i=r.a.useCallback((function(e){s(e)}),[s]),u=r.a.useCallback((function(e,t,n,a){if(l(t||""),!a)return c(n),void s(e);c(""),s([])}),[s,c,l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:le()(Je.a.lineNumbers)},t.lines.map((function(e,t){return r.a.createElement("span",{key:t},t+1)}))),r.a.createElement("span",null,t.lines.map((function(t){return r.a.createElement(Fe,{key:t.number,lineNumber:t.number},t.content.map((function(n,a){var c="".concat(t.number,'-"').concat(n.content,'"-').concat(a);return r.a.createElement(Me,Object.assign({rules:e,selected:c===o,key:c,id:c,onHover:i,onClick:u},n))})))}))))},Ue=n(20),We=n.n(Ue),ze=function(){var e=Object(_.useRecoilValue)(V);return r.a.createElement("div",{className:We.a.outer},r.a.createElement("code",{className:We.a.container},r.a.createElement("pre",{className:le()(We.a.code,We.a.codeText)},e?r.a.createElement(de,null):r.a.createElement("div",{className:We.a.codeWrapper},r.a.createElement(He,null)))))},Ke=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"waiting for code")},r.a.createElement(ze,null)))},$e=n(65),Ye=n.n($e),Ze=function(e){var t=e.onClick,n=e.children;return r.a.createElement("li",{onClick:t},n)},Xe=function(){return Object(_.useRecoilCallback)((function(e){var t=e.reset,n=e.snapshot,a=e.set;return Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M),Q.map((function(e){return t(Z(e))})),e.next=4,n.getPromise(te);case 4:e.sent.forEach(function(){var e=Object(u.a)(i.a.mark((function e(t){var o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise(ce(t));case 2:(o=e.sent)&&(r=Object(D.a)(Object(D.a)({},o),{},{__meta:{state:"deleted"}}),a(ce(t),r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))}))},et=function(e){return"object"===typeof(null===e||void 0===e?void 0:e.colors)&&Array.isArray(e.tokenColors)&&e.tokenColors.every((function(e){return(Array.isArray(e.scope)&&e.scope.every((function(e){return"string"===typeof e}))||"string"===typeof e.scope)&&"object"===typeof e.settings&&("undefined"===typeof e.settings.fontStyle||"string"===typeof e.settings.fontStyle)&&"string"===typeof e.settings.foreground}))},tt=function(e){var t=e.target;return new Promise((function(e,n){var a;if(null===t||void 0===t||null===(a=t.files)||void 0===a?void 0:a.length){var o=new FileReader;o.onload=function(t){var n;e(JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result))},o.readAsText(t.files[0])}else n()}))},nt=function(){var e=r.a.useRef(null),t=Xe(),n=Object(_.useRecoilCallback)((function(e){var t=e.set;return function(e){t(Z(e.scope),e)}})),a=ye(),o=function(){var e=Object(u.a)(i.a.mark((function e(o){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(o);case 2:if(r=e.sent,et(r)){e.next=5;break}return e.abrupt("return");case 5:t(),Object.keys(r.colors).map((function(e){n({scope:e,color:r.colors[e]})})),r.tokenColors.forEach((function(e){var t=Object(D.a)(Object(D.a)({},e),{},{scope:Array.isArray(e.scope)?e.scope:[e.scope],settings:Object(D.a)(Object(D.a)({},e.settings),{},{fontStyle:e.settings.fontStyle?[e.settings.fontStyle]:[]})});a(t)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:e,type:"file",accept:"application/JSON",onChange:o,style:{display:"none"}}),r.a.createElement(Ze,{onClick:function(){var t;null===(t=e.current)||void 0===t||t.click()}},"Open"))},at=function(e,t){var n=r.a.useCallback((function(n){var a,o=n.target;(null===(a=e.current)||void 0===a?void 0:a.contains(o))?t(!1):t(!0)}),[t,e]);r.a.useEffect((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[n])},ot=function(){var e=Object(_.useRecoilState)(V),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.createElement(Ze,{onClick:function(){a(!n)}},n?"Save preview":"Customize preview")},rt=function(e){return{name:e.name,colors:(t=e.generalScopes,t.reduce((function(e,t){return Object(D.a)(Object(D.a)({},e),{},Object(me.a)({},t.scope,t.color))}),{})),semanticHighlighting:!0,tokenColors:e.rules.map((function(e){return function(e){return{name:e.name,scope:e.scope,settings:Object(D.a)(Object(D.a)({},e.settings.fontStyle.length>0?{fontStyle:e.settings.fontStyle.join(" ")}:{}),{},{foreground:e.settings.foreground})}}(e)})),type:e.type};var t},ct=function(){var e=Object(_.useRecoilValue)(oe),t=Object(_.useRecoilValue)(Y),n=Object(_.useRecoilValue)(M);return r.a.createElement(Ze,{onClick:function(){var a=rt({rules:e,generalScopes:t,name:"by https://github.com/el-angel/tmtheme-editor",type:n}),o=JSON.stringify(a,null,2),r=document.createElement("a"),c="data:text/json;charset=utf-8,"+encodeURIComponent(o);r.setAttribute("href",c),r.setAttribute("download","theme.json"),r.setAttribute("style","display: none;"),document.body.appendChild(r),r.click(),r.remove()}},"Export")},st=n(64),lt=n.n(st),it=function(e){var t=e.children,n=e.onClick;return r.a.createElement("button",{type:"button",className:le()(lt.a.button),onClick:n},t)},ut=n(33),dt=n.n(ut),mt=function(e){var t=e.onConfirm,n=e.onReject,a=e.children;return r.a.createElement("div",{className:dt.a.container},r.a.createElement("div",{className:dt.a.content},a),r.a.createElement("div",{className:dt.a.buttons},r.a.createElement(it,{onClick:t},"Yes"),r.a.createElement(it,{onClick:n},"No")))},ft=n(74),pt=n(34),bt=n.n(pt),vt=function(e){var t=e.children,n=e.onClose,a=e.closeOnOutsideClick,o=e.position,c=void 0===o?"top":o,s=e.overlay,l=r.a.useRef(null);return at(l,(function(e){e&&a&&n()})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:l,className:le()(bt.a.container,bt.a[c])},t),s&&r.a.createElement("div",{className:bt.a.overlay}))},gt=function(e){var t=e.children,n=e.target,a=void 0===n?jt():n,o=Object(ft.a)(e,["children","target"]);return r.a.useEffect((function(){return null===yt||void 0===yt||yt.appendChild(a),function(){null===yt||void 0===yt||yt.removeChild(a)}}),[a]),s.a.createPortal(r.a.createElement(vt,o,t),a)},yt=document.querySelector("#modal"),jt=function(){var e=Object(be.uniqueId)(),t=document.createElement("div");return t.setAttribute("id","dialog__".concat(e)),t.setAttribute("data-dialog-id",e),t},_t=function(e,t){return function(){t&&t(),s.a.unmountComponentAtNode(e),null===yt||void 0===yt||yt.removeChild(e)}},kt=function(e){var t=jt(),n={onClose:_t(t),closeOnOutsideClick:!0,overlay:!0,position:"center"};return new Promise((function(a,o){var c=r.a.createElement(vt,n,r.a.createElement(mt,{onConfirm:_t(t,a),onReject:_t(t,o)},e||"Are you sure?"));s.a.render(c,t),null===yt||void 0===yt||yt.appendChild(t)}))},ht=function(){var e=Xe();return r.a.createElement(Ze,{onClick:function(){kt().then((function(){e()}))}},"New")},Ot=n(16),St=n.n(Ot),Et=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilValue)(Z("editor.background")),c=r.a.useRef(null);return at(c,(function(e){e&&n&&a(!1)})),r.a.createElement("div",{className:St.a.container},r.a.createElement("div",{className:St.a.settingsIcon,onClick:function(){return a(!n)}},r.a.createElement(Ye.a,{style:{color:Ge(o.color),opacity:"0.5"}})),r.a.createElement("div",{ref:c,className:le()(St.a.menu,Object(me.a)({},St.a.open,n))},r.a.createElement("ul",null,r.a.createElement(ht,null),r.a.createElement(nt,null),r.a.createElement("li",{className:St.a.divider}),r.a.createElement(ot,null),r.a.createElement("li",{className:St.a.divider}),r.a.createElement(ct,null))))},Ct=n(67),xt=n.n(Ct),wt=n(25),Nt=n.n(wt),Rt=function(e){var t=e.onChange,n=e.value,a=r.a.useRef(null),o=r.a.useCallback(Object(be.debounce)((function(e){t(e)}),100),[t]),c=r.a.useCallback((function(e){o(e.target.value)}),[o]);return r.a.createElement("div",{className:Nt.a.container},r.a.createElement("div",{onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.click()},className:Nt.a.hexValue,style:{backgroundColor:n,color:Ge(n)}},n),r.a.createElement("div",{onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.click()},className:Nt.a.picker},r.a.createElement(xt.a,null)),r.a.createElement("input",{className:Nt.a.input,ref:a,type:"color",value:n,onChange:c}))},It=n(35),At=n.n(It),Ft=function(e){var t,n=e.value,a=e.onChange,o=void 0===a?function(){}:a,c=e.readonly,s=r.a.useState(!1),l=Object(d.a)(s,2),i=l[0],u=l[1],m=r.a.useState(n),f=Object(d.a)(m,2),p=f[0],b=f[1],v=r.a.useCallback((function(){c||u(!0)}),[c]),g=r.a.useCallback((function(){c||(u(!1),o(p))}),[o,c,p]),y=r.a.useCallback((function(e){c||"Enter"===e.key&&g()}),[g,c]);return r.a.useEffect((function(){b(n)}),[n]),r.a.createElement("div",null,r.a.createElement("input",{onClick:v,readOnly:!i||c,className:le()(At.a.name,(t={},Object(me.a)(t,At.a.editable,i&&!c),Object(me.a)(t,At.a.readonly,c),t)),type:"text",value:p,onChange:function(e){return b(e.target.value)},onBlur:g,onKeyDown:y}))},Bt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Ve.a.scale(t).mode("lab").colors(12);return a},Vt=function(e){return[Bt(Ve.a.mix("#ffffff",e,.15).hex(),e,"#000000"),Bt(Ve.a.mix("red",e,.1).hex(),e,Ve.a.mix("cyan",e,.1).hex()),Bt(Ve.a.mix("green",e,.2).hex(),e,Ve.a.mix("magenta",e,.1).hex()),Bt(Ve.a.mix("blue",e,.2).hex(),e,Ve.a.mix("yellow",e,.1).hex())]},Gt=n(36),Pt=n.n(Gt),Dt=function(e){var t=e.color,n=e.onColorSelect,a=r.a.useState([]),o=Object(d.a)(a,2),c=o[0],s=o[1];return r.a.useEffect((function(){s(Vt(t))}),[t]),r.a.createElement("div",{className:Pt.a.container},c.map((function(e,t){return r.a.createElement("div",{className:Pt.a.swatchGroup,key:"group-".concat(t)},e.map((function(e,a){return r.a.createElement("div",{key:"".concat(t,"-").concat(a),className:Pt.a.swatch,onClick:function(){return n(e)},style:{backgroundColor:e}})})))})))},Lt=n(69),Mt=n.n(Lt),Tt=n(68),qt=n.n(Tt),Jt=function(e){var t=e.children;return r.a.createElement("div",{className:qt.a.item},t)},Qt=n(26),Ht=n.n(Qt),Ut=function(e){var t=e.children,n=e.onClose;return r.a.createElement("div",{className:Ht.a.container},r.a.createElement("div",{className:Ht.a.toolbar},r.a.createElement("div",null,r.a.createElement(Jt,null,"Settings")),r.a.createElement("div",null,r.a.createElement("span",{onClick:n,className:Ht.a.close},r.a.createElement(Mt.a,{style:{fontSize:"16px"}})))),r.a.createElement("div",{className:Ht.a.content},t))},Wt=n(37),zt=n.n(Wt),Kt=function(){var e=Object(_.useRecoilState)(Oe),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(Z(n)),c=Object(d.a)(o,2),s=c[0],l=c[1],i=r.a.useCallback((function(e){l(Object(D.a)(Object(D.a)({},s),{},{color:e}))}),[l,s]);return s&&n?r.a.createElement(Ut,{onClose:function(){return a(void 0)}},r.a.createElement("div",{className:zt.a.left},r.a.createElement(Ft,{readonly:!0,value:s.scope})),r.a.createElement("div",{className:zt.a.tools},r.a.createElement(Rt,{value:s.color,onChange:i})),r.a.createElement("div",{className:zt.a.colorContainer},r.a.createElement(Dt,{color:s.color,onColorSelect:function(e){return i(e)}}))):null},$t=n(70),Yt=n.n($t),Zt=n(71),Xt=n.n(Zt),en=n(72),tn=n.n(en),nn=n(43),an=n.n(nn),on=(a={},Object(me.a)(a,T,Yt.a),Object(me.a)(a,q,Xt.a),Object(me.a)(a,J,tn.a),a),rn=function(e){var t=e.type,n=e.onClick,a=e.enabled,o=on[t];return r.a.createElement("div",{onClick:n,className:le()(an.a.icon,Object(me.a)({},an.a.enabled,a))},r.a.createElement(o,null))},cn=n(27),sn=n.n(cn),ln=function(e){var t=e.scopes,n=e.onDelete,a=e.existingScopes,o=Object(X.a)(t).reverse();return r.a.createElement("div",null,o.map((function(e,t){var o=a.includes(e);return r.a.createElement("div",{className:sn.a.container,key:"".concat(e,"-").concat(t)},o&&r.a.createElement("span",{className:sn.a.warning,role:"img","aria-label":"warning"},"\u2757\ufe0f"),r.a.createElement("div",{className:le()(sn.a.scope,Object(me.a)({},sn.a.exists,o)),onClick:function(){return n(e)}},e))})))},un=function(){var e=Object(_.useRecoilState)(pe),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(_.useRecoilCallback)((function(e){var t=e.set,o=e.snapshot;return function(){var e=Object(u.a)(i.a.mark((function e(r){var c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="string"===typeof r?r:r.id,e.next=3,o.getPromise(ce(c));case 3:(s=e.sent)&&(l=Object(D.a)(Object(D.a)({},s),{},{__meta:{state:"deleted"}}),t(ce(c),l)),n===c&&a("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[n,a])},dn=function(e,t){if(!e.scope.length||!t.length)return[];var n=function(e){return e.reduce((function(e,t){return[].concat(Object(X.a)(e),Object(X.a)(t.scope))}),[])}(t);return n.length?e.scope.reduce((function(e,t){return function(e,t){return t.filter((function(t){return t===e})).length>=2}(t,n)?[].concat(Object(X.a)(e),[t]):e}),[]):[]},mn=n(11),fn=n.n(mn),pn=["Enter",","],bn=function(){var e,t,n,a=Object(_.useRecoilValue)(oe),o=un(),c=Te(),s=Object(_.useRecoilValue)(pe),l=Object(_.useRecoilValue)(ce(s)),i=Object(_.useSetRecoilState)(ce(s)),u=r.a.useState(""),m=Object(d.a)(u,2),f=m[0],p=m[1],b=r.a.useCallback((function(e){var t=Object(X.a)(l.settings.fontStyle)||[];"string"===typeof t&&(t=[t]),t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),i(Object(D.a)(Object(D.a)({},l),{},{settings:Object(D.a)(Object(D.a)({},l.settings),{},{fontStyle:t})}))}),[i,l]),v=r.a.useCallback((function(e){i(Object(D.a)(Object(D.a)({},l),{},{settings:Object(D.a)(Object(D.a)({},l.settings),{},{foreground:e})}))}),[i,l]),g=r.a.useCallback((function(e){p(e.target.value)}),[p]),y=r.a.useCallback((function(e){pn.includes(e.key)&&(e.preventDefault(),i(Object(D.a)(Object(D.a)({},l),{},{scope:[f].concat(Object(X.a)(l.scope))})),p(""))}),[i,l,f]);return(null===l||void 0===l?void 0:l.id)?r.a.createElement(Ut,{onClose:function(){return c()}},r.a.createElement("div",{className:fn.a.container},r.a.createElement("div",{className:fn.a.top},r.a.createElement("div",{className:fn.a.left},r.a.createElement("div",null,r.a.createElement(Ft,{value:l.name,onChange:function(e){return i(Object(D.a)(Object(D.a)({},l),{},{name:e}))}}),r.a.createElement("div",{className:fn.a.scopesList},r.a.createElement(ln,{existingScopes:dn(l,a),scopes:l.scope,onDelete:function(e){var t=l.scope.findIndex((function(t){return t===e})),n=Object(X.a)(l.scope);n.splice(t,1),i(Object(D.a)(Object(D.a)({},l),{},{scope:n}))}}))),r.a.createElement(it,{onClick:function(){return o(l)}},"Delete")),r.a.createElement("div",{className:fn.a.tools},r.a.createElement("div",{className:fn.a.picker},r.a.createElement(Rt,{value:l.settings.foreground,onChange:v})),r.a.createElement(rn,{type:T,onClick:function(){return b(T)},enabled:(null===(e=l.settings.fontStyle)||void 0===e?void 0:e.includes(T))||!1}),r.a.createElement(rn,{type:q,onClick:function(){return b(q)},enabled:(null===(t=l.settings.fontStyle)||void 0===t?void 0:t.includes(q))||!1}),r.a.createElement(rn,{type:J,onClick:function(){return b(J)},enabled:(null===(n=l.settings.fontStyle)||void 0===n?void 0:n.includes(J))||!1})),r.a.createElement("div",{className:fn.a.colorContainer},r.a.createElement(Dt,{color:l.settings.foreground,onColorSelect:function(e){return v(e)}}))),r.a.createElement("div",{className:fn.a.addScope},r.a.createElement("input",{className:fn.a.addScopeInput,type:"text",placeholder:"Add scope",value:f,onChange:g,onKeyDown:y})))):null},vn=function(){return"general"===Object(_.useRecoilValue)(Ee)?r.a.createElement(Kt,null):r.a.createElement(bn,null)},gn=n(21),yn=n.n(gn),jn=function(e){var t=e.isActive,n=e.onClick,a=void 0===n?function(){}:n,o=e.title,c=e.color,s=e.showWarning,l=void 0!==s&&s;return r.a.createElement("div",{className:le()(yn.a.container,Object(me.a)({},yn.a.active,t)),onClick:a},r.a.createElement("div",null,l&&r.a.createElement("span",{className:yn.a.warning},"\u2757\ufe0f"),r.a.createElement("code",{className:yn.a.name},o)),r.a.createElement("div",{className:yn.a.color,style:{backgroundColor:c}}))},_n=function(e){var t,n=e.scope,a=Object(_.useRecoilState)(Z(n)),o=Object(d.a)(a,1)[0],c=Object(_.useRecoilState)(Oe),s=Object(d.a)(c,2),l=s[0],i=s[1],u=(null===(t=o)||void 0===t?void 0:t.scope)===l;return o?r.a.createElement(r.a.Fragment,null,r.a.createElement(jn,{isActive:u,onClick:function(){return i(o.scope)},title:o.scope,color:o.color})):null},kn=function(){return r.a.createElement(r.a.Fragment,null,Q.map((function(e){return r.a.createElement(_n,{scope:e,key:e})})))},hn=function(e){var t=e.id,n=e.name,a=e.settings,o=e.scope,c=Te(),s=Object(_.useRecoilValue)(oe),l=Object(_.useRecoilValue)(pe),i=dn({id:t,name:n,settings:a,scope:o},s),u=l===t;return r.a.createElement(jn,{isActive:u,onClick:function(){u||c(t)},title:n,color:a.foreground,showWarning:!!i.length})},On=function(){var e=Object(_.useRecoilValue)(oe);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(hn,Object.assign({key:e.id},e))})))},Sn=n(17),En=n.n(Sn),Cn=function(){var e=Object(_.useRecoilState)(Ee),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:En.a.toolbar},r.a.createElement("div",{className:En.a.header},r.a.createElement("div",{className:le()(En.a.item,Object(me.a)({},En.a.isActive,"rules"===n)),onClick:function(){return a("rules")}},"Rules"),r.a.createElement("div",{className:le()(En.a.item,Object(me.a)({},En.a.isActive,"general"===n)),onClick:function(){return a("general")}},"General")))},xn=n(44),wn=n.n(xn),Nn=Object(_.selector)({key:R("GeneralScopesCSS"),get:function(e){var t=e.get,n=Q.reduce((function(e,n){var a=t(Z(n)),o=a.scope,r=a.color,c="--".concat(o.replace(/\./,"-"));return"\n        ".concat(e,"\n        ").concat(c,": ").concat(r,";\n      ").trim()}),"");return"\n      :root {\n        ".concat(n,"\n      }\n    ")}}),Rn=function(e){return Object.keys(e).reduce((function(t,n){var a=e[n];return t+=".".concat(n," {\n"),Object.keys(a).map((function(e){var n=e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t+="".concat(n,": ").concat(a[e],";\n")})),t+="}\n",t+="\n"}),"")},In=Object(_.selector)({key:R("RulesCSS"),get:function(e){var t=(0,e.get)(oe).reduce((function(e,t){var n=t.scope.reduce((function(e,n){var a,o,r,c={color:t.settings.foreground};return(null===(a=t.settings.fontStyle)||void 0===a?void 0:a.includes(T))&&(c.fontWeight="bold"),(null===(o=t.settings.fontStyle)||void 0===o?void 0:o.includes(q))&&(c.fontStyle="italic"),(null===(r=t.settings.fontStyle)||void 0===r?void 0:r.includes(J))&&(c.textDecoration="underline"),Object(D.a)(Object(D.a)({},e),{},Object(me.a)({},n.replace(/ /g,"."),c))}),{});return Object(D.a)(Object(D.a)({},e),n)}),{});return Rn(t)}}),An=function(){var e=Object(_.useRecoilValue)(Ee),t=Object(_.useRecoilValue)(In),n=Object(_.useRecoilValue)(Nn);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Cn,null)),r.a.createElement("div",{className:wn.a.content},r.a.createElement("style",{type:"text/css"},t),r.a.createElement("style",{type:"text/css"},n),r.a.createElement("div",{className:wn.a.rules},"rules"===e&&r.a.createElement(On,null),"general"===e&&r.a.createElement(kn,null)),r.a.createElement(Re,null)))},Fn=Object(_.atom)({key:N("ModalIds"),default:[]}),Bn=Object(_.atomFamily)({key:N("ModalState__Family"),default:!1}),Vn=Object(_.selectorFamily)({key:R("GetModalState__Family"),get:function(e){return function(t){return(0,t.get)(Bn(e))}},set:function(e){return function(t,n){var a=t.set,o=(0,t.get)(Fn);o.includes(e)||a(Fn,[].concat(Object(X.a)(o),[e])),n&&o.forEach((function(t){t!==e&&a(Bn(t),!1)})),a(Bn(e),n)}}}),Gn=n(73),Pn=n.n(Gn),Dn=function(e){var t=e.children,n=e.onClick;return r.a.createElement("div",{onClick:n,className:Pn.a.item},t)},Ln=n(18),Mn=n.n(Ln),Tn=function(e){var t=e.value,n=e.options,a=e.onSelect,o=e.onClose,c=e.inputProps,s=n.findIndex((function(e){return e.value===t})),l=r.a.useState(s),i=Object(d.a)(l,2),u=i[0],m=i[1],f=r.a.useCallback((function(e){if(["Enter","ArrowUp","ArrowDown","Escape"].includes(e.key))return e.preventDefault(),"Escape"==e.key&&o(),"Enter"===e.key&&a(n[u]),"ArrowUp"===e.key?0===u?void m(n.length-1):void m(u-1):"ArrowDown"===e.key?u===n.length-1?void m(0):void m(u+1):void 0}),[u,o,a,n]);return r.a.useEffect((function(){return window.addEventListener("keydown",f),function(){window.removeEventListener("keydown",f)}}),[u,f]),r.a.createElement("div",{className:Mn.a.container},r.a.createElement("div",{className:Mn.a.inputContainer},r.a.createElement("input",Object.assign({},c,{className:Mn.a.input}))),r.a.createElement("div",{className:Mn.a.optionContainer},n.map((function(e,t){return r.a.createElement("div",{onClick:function(){return a(e)},className:le()(Mn.a.option,Object(me.a)({},Mn.a.focussed,u===t)),key:e.value},e.label)}))))},qn=Object.keys(k).map((function(e){return{value:e,label:k[e]}})),Jn=function(){var e=Object(_.useRecoilState)(Vn("language")),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(A),c=Object(d.a)(o,2),s=c[0],l=c[1];if(!n)return null;return r.a.createElement(gt,{closeOnOutsideClick:!0,onClose:function(){return a(!1)}},r.a.createElement(Tn,{value:s,options:qn,onSelect:function(e){l(e.value),a(!1)},onClose:function(){return a(!1)},inputProps:{placeholder:"Select language mode",readOnly:!0}}))},Qn=[{label:"Dark",value:"dark"},{label:"Light",value:"light"}],Hn=function(){var e=Object(_.useRecoilState)(Vn("themeStyle")),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(M),c=Object(d.a)(o,2),s=c[0],l=c[1];if(!n)return null;return r.a.createElement(gt,{closeOnOutsideClick:!0,onClose:function(){return a(!1)}},r.a.createElement(Tn,{value:s,options:Qn,onSelect:function(e){l(e.value),a(!1)},onClose:function(){return a(!1)},inputProps:{placeholder:"Select theme style",readOnly:!0}}))},Un=n(45),Wn=n.n(Un),zn=function(){var e=Object(_.useRecoilState)(Vn("language")),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(_.useRecoilState)(Vn("themeStyle")),c=Object(d.a)(o,2),s=c[0],l=c[1],i=Object(_.useRecoilValue)(A),u=Object(_.useRecoilState)(M),m=Object(d.a)(u,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jn,null),r.a.createElement(Hn,null),r.a.createElement("div",{className:Wn.a.container},r.a.createElement("div",{className:"left"},"main*"),r.a.createElement("div",{className:"right"},r.a.createElement(Dn,{onClick:function(){return l(!s)}},"Style: ".concat(m)),r.a.createElement(Dn,{onClick:function(){return a(!n)}},k[i]),r.a.createElement(Dn,null,r.a.createElement("a",{className:Wn.a.c_est_moi,href:"http://github.com/el-angel",target:"_blank",rel:"noopener noreferrer"},"el angel @ github")))))},Kn=n(13),$n=n.n(Kn),Yn="".concat("/textmate-editor","/onigasm.wasm"),Zn=function(e){var t=e.set,n=x.keys(),a=x.get(N("RulesIds"))||[];t(ne,a),n.forEach((function(e){if(e!==N("RulesIds")){if(e.includes(N("Rules_"))){var n=x.get(e);a.includes(n.id)&&t(ce(n.id),n)}if(e.includes(N("GeneralScopesFamily"))){var o=x.get(e);t(Z(o.scope),o)}if(e.includes(N("RawCode"))){var r=x.get(e);t(B,r)}if(e.includes(N("Theme"))){var c=x.get(e);t(M,c)}}}))},Xn=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.useEffect((function(){var e=document.querySelector("body");e&&e.setAttribute("style","overflow: hidden"),n||Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Yn);case 2:a(!0);case 3:case"end":return e.stop()}}),e)})))()}),[n]),n?r.a.createElement(_.RecoilRoot,{initializeState:Zn},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:$n.a.container},r.a.createElement("div",{className:$n.a.sidebar},r.a.createElement(An,null)),r.a.createElement("div",{className:$n.a.main},r.a.createElement("div",{className:$n.a.settings},r.a.createElement(Et,null)),r.a.createElement("div",{className:$n.a.code},r.a.createElement(Ke,null)),r.a.createElement("div",{className:$n.a.bottom},r.a.createElement(vn,null))),r.a.createElement("div",{className:$n.a.statusbar},r.a.createElement(zn,null))))):r.a.createElement("div",null,"starting up...")};n(122);s.a.render(r.a.createElement(o.Profiler,{id:"Application",onRender:function(){}},r.a.createElement(r.a.StrictMode,null,r.a.createElement(Xn,null))),document.getElementById("root"))},13:function(e,t,n){e.exports={container:"src-App-module__container--1cmbG",settings:"src-App-module__settings--1nmKj",statusbar:"src-App-module__statusbar--3npHX",editor:"src-App-module__editor--34Nb6",sidebar:"src-App-module__sidebar--3M66T",main:"src-App-module__main--1deVu",code:"src-App-module__code--3ZpfS",bottom:"src-App-module__bottom--1WuIW"}},16:function(e,t,n){e.exports={container:"src-containers-Code-components-SettingsMenu-styles-module__container--MUak9",settingsIcon:"src-containers-Code-components-SettingsMenu-styles-module__settingsIcon--1G-on",menu:"src-containers-Code-components-SettingsMenu-styles-module__menu--Ltlvy",open:"src-containers-Code-components-SettingsMenu-styles-module__open--1_VRL",divider:"src-containers-Code-components-SettingsMenu-styles-module__divider--dPTSa",disabled:"src-containers-Code-components-SettingsMenu-styles-module__disabled--17qzT"}},17:function(e,t,n){e.exports={toolbar:"src-containers-Sidebar-components-Toolbar-styles-module__toolbar--2AdAR",item:"src-containers-Sidebar-components-Toolbar-styles-module__item--1nUc-",header:"src-containers-Sidebar-components-Toolbar-styles-module__header--13FeJ",isActive:"src-containers-Sidebar-components-Toolbar-styles-module__isActive--3Ab5T"}},18:function(e,t,n){e.exports={container:"src-components-ui-QuickInput-styles-module__container--1Aa5a",inputContainer:"src-components-ui-QuickInput-styles-module__inputContainer--2umYE",input:"src-components-ui-QuickInput-styles-module__input--1KI_v",optionContainer:"src-components-ui-QuickInput-styles-module__optionContainer--15Stj",option:"src-components-ui-QuickInput-styles-module__option--wNZOe",focussed:"src-components-ui-QuickInput-styles-module__focussed--2dH3h"}},20:function(e,t,n){e.exports={outer:"src-containers-Code-components-Editor-styles-module__outer--1UYCi",container:"src-containers-Code-components-Editor-styles-module__container--VNZe8",code:"src-containers-Code-components-Editor-styles-module__code--37_HL",codeWrapper:"src-containers-Code-components-Editor-styles-module__codeWrapper--3wuPA",lineNumbers:"src-containers-Code-components-Editor-styles-module__lineNumbers--2h937"}},21:function(e,t,n){e.exports={container:"src-components-ui-SidebarItem-styles-module__container--lXls6",active:"src-components-ui-SidebarItem-styles-module__active--N5965",warning:"src-components-ui-SidebarItem-styles-module__warning--3fvW9",name:"src-components-ui-SidebarItem-styles-module__name--2knuo",color:"src-components-ui-SidebarItem-styles-module__color--1LlRK",input:"src-components-ui-SidebarItem-styles-module__input--QbbuG"}},25:function(e,t,n){e.exports={container:"src-containers-Settings-components-ColorPicker-styles-module__container--12gp1",hexValue:"src-containers-Settings-components-ColorPicker-styles-module__hexValue--3CP6L",picker:"src-containers-Settings-components-ColorPicker-styles-module__picker--bnJQn",input:"src-containers-Settings-components-ColorPicker-styles-module__input--3NUnP"}},26:function(e,t,n){e.exports={container:"src-components-ui-Panel-styles-module__container--3vp3o",content:"src-components-ui-Panel-styles-module__content--k6t2C",toolbar:"src-components-ui-Panel-styles-module__toolbar--2ITeY",close:"src-components-ui-Panel-styles-module__close--3MMcq"}},27:function(e,t,n){e.exports={container:"src-containers-Settings-components-ScopesList-styles-module__container--3ihuh",warning:"src-containers-Settings-components-ScopesList-styles-module__warning--1nJRm",scope:"src-containers-Settings-components-ScopesList-styles-module__scope--qBa_H"}},32:function(e,t,n){e.exports={info:"src-containers-Code-components-Info-styles-module__info--3xlGJ",exists:"src-containers-Code-components-Info-styles-module__exists--3VmjJ",scope:"src-containers-Code-components-Info-styles-module__scope--1-8iE",copied:"src-containers-Code-components-Info-styles-module__copied--gGiOl"}},33:function(e,t,n){e.exports={container:"src-components-ui-Confirm-styles-module__container--2HI1S",content:"src-components-ui-Confirm-styles-module__content--1zDtw",buttons:"src-components-ui-Confirm-styles-module__buttons--3uFxF"}},34:function(e,t,n){e.exports={container:"src-components-ui-Modal-styles-module__container--1EaRg",center:"src-components-ui-Modal-styles-module__center--3Yb4Y",overlay:"src-components-ui-Modal-styles-module__overlay--3xlyo"}},35:function(e,t,n){e.exports={name:"src-containers-Settings-components-NameInput-styles-module__name--1gvp1",readonly:"src-containers-Settings-components-NameInput-styles-module__readonly--SGwZO",editable:"src-containers-Settings-components-NameInput-styles-module__editable--2FQvN"}},36:function(e,t,n){e.exports={container:"src-containers-Settings-components-Swatches-styles-module__container--2Hm-F",swatchGroup:"src-containers-Settings-components-Swatches-styles-module__swatchGroup--1JCNi",swatch:"src-containers-Settings-components-Swatches-styles-module__swatch--3rU5e"}},37:function(e,t,n){e.exports={container:"src-containers-Settings-GeneralSettings-styles-module__container--16REN",colorContainer:"src-containers-Settings-GeneralSettings-styles-module__colorContainer--32t1O",top:"src-containers-Settings-GeneralSettings-styles-module__top--1CXDV",left:"src-containers-Settings-GeneralSettings-styles-module__left--Ci30q",delete:"src-containers-Settings-GeneralSettings-styles-module__delete--2vFdO",tools:"src-containers-Settings-GeneralSettings-styles-module__tools--2DMa8",scopesList:"src-containers-Settings-GeneralSettings-styles-module__scopesList--3rO8d",addScope:"src-containers-Settings-GeneralSettings-styles-module__addScope--1iFQw"}},41:function(e,t,n){e.exports={codeText:"src-containers-Code-components-CodeInput-styles-module__codeText--264Ou",textArea:"src-containers-Code-components-CodeInput-styles-module__textArea--1s8Rs"}},42:function(e,t,n){e.exports={subline:"src-containers-Code-components-SubLine-styles-module__subline--1Q-lo",empty:"src-containers-Code-components-SubLine-styles-module__empty--3DWOQ"}},43:function(e,t,n){e.exports={icon:"src-containers-Settings-components-FontStyle-styles-module__icon--3eRzC",enabled:"src-containers-Settings-components-FontStyle-styles-module__enabled--1Hm9S"}},44:function(e,t,n){e.exports={rules:"src-containers-Sidebar-styles-module__rules--1B94Y",content:"src-containers-Sidebar-styles-module__content--1QxK2"}},45:function(e,t,n){e.exports={container:"src-containers-StatusBar-styles-module__container--2kClV",c_est_moi:"src-containers-StatusBar-styles-module__c_est_moi--2yqZl"}},62:function(e,t,n){e.exports={line:"src-containers-Code-components-Line-styles-module__line--BdjKc"}},63:function(e,t,n){e.exports={container:"src-containers-Code-components-CodeView-styles-module__container--1ApKT",code:"src-containers-Code-components-CodeView-styles-module__code--1GDsG",lineNumbers:"src-containers-Code-components-CodeView-styles-module__lineNumbers--yU7cG"}},64:function(e,t,n){e.exports={button:"src-components-ui-Button-styles-module__button--33mOU"}},68:function(e,t,n){e.exports={item:"src-components-ui-PanelItem-styles-module__item--l0pOa"}},73:function(e,t,n){e.exports={item:"src-containers-StatusBar-components-Item-styles-module__item--3N6sp"}},76:function(e,t,n){e.exports=n(124)}},[[76,1,2]]]);
//# sourceMappingURL=main.fbfbf591.chunk.js.map